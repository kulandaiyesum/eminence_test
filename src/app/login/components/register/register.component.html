<div class="container register_wrap">
  <div class="form_crud">
    <mat-icon
      class="close_btn"
      mat-icon-button
      [routerLink]="['/login']"
      (click)="closeDialog()"
      >close</mat-icon
    >
    <form #registrationForm="ngForm">
      <div class="form_wrap">
        <div class="form_heading" style="text-align: center">
          REGISTER ACCOUNT
        </div>
        <div class="tier_info_section">
          <label for="topic">Choose a topic:</label><br />
          <select
            name="topic"
            id="topic"
            style="width: 100%"
            [(ngModel)]="registerModel.topic"
            #topicModel="ngModel"
            (change)="onTopicSelected(registerModel.topic)"
            required
          >
            <option value="" disabled selected>Select a Topic</option>

            <option *ngFor="let topic of topics" [value]="topic._id">
              {{ topic.topic }}
            </option></select
          ><br />
          <div
            *ngIf="
              topicModel.invalid && (topicModel.dirty || topicModel.touched)
            "
          >
            <div *ngIf="topicModel.errors?.['required']" id="error-message">
              Topic is required
            </div>
          </div>
          <pre></pre>

          <input
            type="radio"
            id="Premium"
            name="Premium"
            value="Premium"
            checked
          />
          <label for="Premium" style="margin-left: 10px">Premium</label><br />
          <span style="font-size: 14px; color: #a9aeb2"
            >Enjoy unlimited question generation with the premium
            membership!</span
          >
          <div class="ratio_group">
            <div
              class="mt-2 radio_div"
              *ngFor="let package of b2cPackagesFiltered"
            >
              <input
                type="radio"
                name="price"
                [id]="package._id"
                class="me-2"
                [value]="package._id"
                [(ngModel)]="registerModel.packageNameId"
              />
              <label [for]="package._id" class="">
                $ {{ package.amount }} / {{ package.durationType }}
              </label>
            </div>
          </div>
        </div>

        <div class="form-names">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <br />
            <input
              type="text"
              id="firstName"
              name="firstName"
              [(ngModel)]="registerModel.firstName"
              required
              #firstName="ngModel"
            />
            <div
              *ngIf="
                firstName.invalid && (firstName.dirty || firstName.touched)
              "
            >
              <div *ngIf="firstName.errors?.['required']" id="error-message">
                First Name is required
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <br />
            <input
              type="text"
              id="lastName"
              name="lastName"
              [(ngModel)]="registerModel.lastName"
              required
              #lastName="ngModel"
            />
            <div
              *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)"
            >
              <div *ngIf="lastName.errors?.['required']" id="error-message">
                Last Name is required
              </div>
            </div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="institutionName">College / School Name</label>
          <br />
          <input
            type="text"
            id="institutionName"
            name="institutionName"
            [(ngModel)]="registerModel.institutionName"
            #institutionName="ngModel"
          />
          <!-- <div
            *ngIf="
              institutionName.invalid &&
              (institutionName.dirty || institutionName.touched)
            "
          >
            <div
              *ngIf="institutionName.errors?.['required']"
              id="error-message"
            >
              Institution Name is required
            </div>
          </div> -->
        </div>

        <div class="form-group mt-3">
          <label for="email">Email</label>
          <br />
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="registerModel.email"
            required
            email
            #email="ngModel"
          />
          <div *ngIf="email.invalid && (email.dirty || email.touched)">
            <div *ngIf="email.errors?.['required']" id="error-message">
              Email is required
            </div>
            <div *ngIf="email.errors?.['email']" id="error-message">
              Invalid email format
            </div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="password">Password</label>
          <br />
          <input
            type="password"
            id="password"
            name="password"
            [(ngModel)]="registerModel.password"
            required
            #password="ngModel"
          />
          <div *ngIf="password.invalid && (password.dirty || password.touched)">
            <div *ngIf="password.errors?.['required']" id="error-message">
              Password is required
            </div>
          </div>
        </div>

        <div class="form_btns">
          <button
            type="submit"
            class="form_btn_continue"
            (click)="onRegistrationSubmit()"
            [disabled]="!registrationForm.valid"
          >
            Continue to Checkout
          </button>
          <br />
          <button
            type="button"
            class="form_btn_login"
            (click)="openLoginPopUp()"
          >
            Login
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
<div *ngIf="success">
  <h1>Your Payment is successfull</h1>
</div>
<div *ngIf="failure">
  <h1>Your Payment is Failure</h1>
</div>
