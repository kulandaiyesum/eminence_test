<div class="qgen_container">
  <p>
    <strong style="color: var(--qgen-red)">QGen</strong> is your custom question
    generator. Enter a few key words or a key concept to build a full
    USMLE-style question that pertains to your input.
  </p>
  <br />
  <p>Example Input: antiphospholipid syndrome, anticardiolipin, SLE</p>
  <p>
    Another Example: The basal lamina connects to fibrils of the reticular
    lamina via Type 7 collagen.
  </p>

  <form [formGroup]="gGenForm">
    <div
      style="margin-bottom: 1.125rem"
      class="form-group custom_textarea_group"
    >
      <textarea
        class="form-control"
        name=""
        id=""
        rows="6"
        [(ngModel)]="qGenObject.keywords"
        formControlName="keywords"
        placeholder="Enter Input..."
      >
      </textarea>
      <div class="error">
        <mat-error
          *ngIf="
            gGenForm.controls['keywords'].hasError('required') &&
            gGenForm.controls['keywords'].touched
          "
          >Please enter a valid input. it cannot be empty</mat-error
        >
      </div>
    </div>
    <div class="bulid_qestion">
      <div class="fw-600">Number of Questions:</div>
      <div class="form-group number_input" style="display: inline-block">
        <input
          type="tel"
          class="form-control"
          placeholder="Max. 5"
          [(ngModel)]="qGenObject.questionsCount"
          formControlName="questionsCount"
          (input)="onInput($event)"
        />
        <div class="re_error">
          <mat-error
            *ngIf="
              gGenForm.controls['questionsCount'].hasError('required') &&
              gGenForm.controls['questionsCount'].touched
            "
            >Enter a valid input.</mat-error
          >
          <mat-error *ngIf="gGenForm.controls['questionsCount'].hasError('max')"
            >Maximum limit is 5</mat-error
          >
          <mat-error *ngIf="gGenForm.controls['questionsCount'].hasError('min')"
            >Minimum should be 1</mat-error
          >
        </div>
      </div>
      <div class="build_btn">
        <button
          [disabled]="gGenForm.invalid"
          type="button"
          (click)="submitQgen()"
        >
          Build
        </button>
      </div>
    </div>
  </form>

  <div class="qgen_response_container">
    <div class="h5 fw-600" style="color: var(--qgen-red)">Pending</div>
    <div class="qgen-response">
      <ng-container *ngFor="let qgenObject of qgenObjectList">
        <div *ngIf="qgenObject?.status === 'Pending'" class="response">
          <div class="input_wrap">
            <strong>Input:&nbsp;</strong>
            <span *ngFor="let keyword of qgenObject.keywords; let last = last"
              >{{ keyword }}{{ last ? "" : ",&nbsp;" }}</span
            >
          </div>
          <div class="questions_wrap">
            <div class="questions">
              <strong>Questions:&nbsp;</strong>{{ qgenObject.questionsCount }}
            </div>
            <div class="loader me-3">
              <img src="../../../../assets/images/loader.gif" />
            </div>
          </div>
          <div class="completion_bar">
            <div class="loader_ani"></div>
          </div>
        </div>
        <div
          *ngIf="qgenObject?.status !== 'Pending'"
          class="response"
          [routerLink]="['/eminence/faculty/editor', qgenObject._id]"
        >
          <div class="input_wrap">
            <strong>Input: </strong>
            <span *ngFor="let keyword of qgenObject.keywords; let last = last"
              >{{ keyword }}{{ last ? "" : ",&nbsp;" }}</span
            >
          </div>
          <div class="questions_wrap">
            <div class="questions">
              <strong>Questions:&nbsp;</strong> {{ qgenObject.questionsCount }}
            </div>
            <div class="loader me-3">
              <mat-icon>check_circle</mat-icon>
            </div>
          </div>
          <div class="completion_bar">
            <div class="red_bg">
              <div class="green_bg" style="width: 100%"></div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
