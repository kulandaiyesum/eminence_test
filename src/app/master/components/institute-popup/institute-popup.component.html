<div class="main">
  <div class="data">
    <div class="heading">
      <div class="head">
        <h2 *ngIf="items === null">Add Institution</h2>
        <h2 *ngIf="items !== null">Update Institution</h2>
      </div>
      <div class="icon">
        <mat-icon class="close_btn" mat-icon-button (click)="closeDialog()"
          >close</mat-icon
        >
      </div>
    </div>
    <div class="forms">
      <form #instituteForm="ngForm">
        <div class="row_group">
          <div class="form-group custom_group">
            <label for="type">Package</label>
            <select
              id="type"
              class="form-select"
              name="type"
              placeholder="select package type"
              [(ngModel)]="institutionModel.packageName"
              (ngModelChange)="getPackgeType(institutionModel.packageName)"
              required
            >
              <option
                *ngFor="let package of packageList"
                [value]="package.packageName"
              >
                $ {{ package.amount }} {{ "" }}/ {{ package.packageName }}
              </option>
            </select>
          </div>
        </div>

        <label for="name" *ngIf="institutionModel.packageName"
          >package Details</label
        >
        <div *ngIf="institutionModel.packageName">
          {{ institutionModel.questionsCount }} Questions Per Package
        </div>
        <label for="name">Institute Name</label>
        <input
          type="text"
          placeholder="Name"
          name="name"
          [(ngModel)]="institutionModel.name"
          required
        />
        <div
          *ngIf="instituteForm.controls['name']?.errors?.['required'] && instituteForm.controls['name']?.touched"
          class="error-message"
        >
          Name is required.
        </div>
        <label for="address">Address</label>
        <input
          type="text"
          placeholder="Address"
          name="address"
          [(ngModel)]="institutionModel.address"
          required
        />
        <div
          *ngIf="instituteForm.controls['address']?.errors?.['required'] && instituteForm.controls['address']?.touched"
          class="error-message"
        >
          Address is required.
        </div>
        <label for="state">State</label>
        <input
          type="text"
          placeholder="State"
          name="state"
          [(ngModel)]="institutionModel.state"
          required
        />
        <div
          *ngIf="instituteForm.controls['state']?.errors?.['required'] && instituteForm.controls['state']?.touched"
          class="error-message"
        >
          State is required.
        </div>
        <label for="zip">Zip</label>
        <input
          type="number"
          placeholder="Zip"
          name="zip"
          [(ngModel)]="institutionModel.zip"
          required
        />
        <div
          *ngIf="instituteForm.controls['zip']?.errors?.['required'] && instituteForm.controls['zip']?.touched"
          class="error-message"
        >
          Zip code is required.
        </div>
        <label for="email">Email</label>
        <input
          type="text"
          placeholder="Email"
          name="email"
          [(ngModel)]="institutionModel.email"
          required
          email
        />
        <div
          *ngIf="instituteForm.controls['email']?.errors?.['required'] && instituteForm.controls['email']?.touched"
          class="error-message"
        >
          Email is required.
        </div>
        <div
          *ngIf="instituteForm.controls['email']?.errors?.['email'] && instituteForm.controls['email']?.touched"
          class="error-message"
        >
          Invalid email format.
        </div>

        <button
          type="submit"
          (click)="onInstituteSubmit()"
          *ngIf="!visibleUpdate"
          [disabled]="instituteForm.invalid"
        >
          Submit
        </button>
        <button
          type="submit"
          *ngIf="visibleUpdate"
          [disabled]="instituteForm.invalid"
          (click)="updateInstitute()"
        >
          Update
        </button>
      </form>
    </div>
  </div>
</div>
