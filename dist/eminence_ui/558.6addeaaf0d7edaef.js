"use strict";(self.webpackChunkeminence_ui=self.webpackChunkeminence_ui||[]).push([[558],{8558:(x,h,s)=>{s.r(h),s.d(h,{AuthModule:()=>w});var e=s(1180),m=s(6814),d=s(1896),l=s(6223),u=s(7874),p=s(553),n=s(5879),f=s(9862);let M=(()=>{var r;class i{constructor(t){(0,e.Z)(this,"http",void 0),(0,e.Z)(this,"loginURL",p.N.localdomain+"logins/"),(0,e.Z)(this,"headers",(new f.WM).set("Content-Type","application/json")),this.http=t}loginAuthenticate(t){return this.http.post(`${this.loginURL}save`,t,{headers:this.headers})}}return r=i,(0,e.Z)(i,"\u0275fac",function(t){return new(t||r)(n.LFG(f.eN))}),(0,e.Z)(i,"\u0275prov",n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})),i})();var C=s(2425);function O(r,i){1&r&&(n.TgZ(0,"div",11),n._uU(1," Email is required. "),n.qZA())}function P(r,i){1&r&&(n.TgZ(0,"div",11),n._uU(1," Invalid email format. "),n.qZA())}function v(r,i){1&r&&(n.TgZ(0,"div",11),n._uU(1," Password is required. "),n.qZA())}function _(r,i){1&r&&(n.TgZ(0,"div",11),n._uU(1," Password must be at least 8 characters long. "),n.qZA())}const Z=[{path:"authlogin",component:(()=>{var r;class i{constructor(t,g,o,a){(0,e.Z)(this,"formBuilder",void 0),(0,e.Z)(this,"router",void 0),(0,e.Z)(this,"loginService",void 0),(0,e.Z)(this,"toastr",void 0),(0,e.Z)(this,"receivedData",""),(0,e.Z)(this,"loginForm",void 0),(0,e.Z)(this,"hidePassword",!0),(0,e.Z)(this,"secretKeyLength",32),(0,e.Z)(this,"secretKey",p.N.secretKey),(0,e.Z)(this,"user",void 0),(0,e.Z)(this,"loginUser",{firstName:"",lastName:"",role:"",id:"",token:""}),(0,e.Z)(this,"loginModel",{email:"",password:""}),this.formBuilder=t,this.router=g,this.loginService=o,this.toastr=a}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.formBuilder.group({email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.required,l.kI.minLength(8)]]})}togglePasswordVisibility(t){t.preventDefault(),this.hidePassword=!this.hidePassword}onLoginSubmit(){this.loginForm.controls.email.setValue(this.loginModel.email),this.loginForm.controls.password.setValue(this.loginModel.password),this.loginForm.valid&&this.loginService.loginAuthenticate(this.loginForm.value).subscribe(t=>{this.loginUser.firstName=t.user.firstName,this.loginUser.lastName=t.user.lastName,this.loginUser.role=t.user.role.role,this.loginUser.id=t.user._id,this.loginUser.token=t.token,("ADMIN"===t.user.role.role||"FACULTY"===t.user.role.role)&&(this.router.navigateByUrl("/faculty/qgen"),this.loginUser.role=this.encryptText(t.user.role.role,this.secretKey),this.loginUser.firstName=this.encryptText(t.user.firstName,this.secretKey),this.loginUser.lastName=this.encryptText(t.user.lastName,this.secretKey),this.loginUser.id=this.encryptText(t.user._id,this.secretKey),localStorage.setItem("1",this.loginUser.token),localStorage.setItem("2",this.loginUser.role),localStorage.setItem("3",this.loginUser.firstName),localStorage.setItem("4",this.loginUser.lastName),localStorage.setItem("5",this.loginUser.id),this.toastr.success("Login success","",{timeOut:3e3}))},t=>{this.toastr.error("Invalid credentials","",{timeOut:3e3}),console.log("Error : ",t)})}encryptText(t,g){return u.AES.encrypt(t,g).toString()}decryptText(t,g){return u.AES.decrypt(t,g).toString(u.enc.Utf8)}}return r=i,(0,e.Z)(i,"\u0275fac",function(t){return new(t||r)(n.Y36(l.qu),n.Y36(d.F0),n.Y36(M),n.Y36(C._W))}),(0,e.Z)(i,"\u0275cmp",n.Xpm({type:r,selectors:[["app-auth-login"]],decls:23,vars:6,consts:[[1,"login-container"],[1,"main"],[1,"login-fields"],[1,"forms"],["loginForm","ngForm"],["type","text","placeholder","Email address","name","email","required","","email","",3,"ngModel","ngModelChange"],["class","error-message",4,"ngIf"],["type","password","placeholder","Password","name","password","required","","minlength","8",3,"ngModel","ngModelChange"],["id","login","type","submit",3,"click"],["id","register","type","button"],["href",""],[1,"error-message"]],template:function(t,g){if(1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"header")(3,"h2"),n._uU(4,"MEMBER LOGIN"),n.qZA(),n._UZ(5,"p"),n.qZA(),n.TgZ(6,"div",2)(7,"div",3)(8,"form",null,4)(10,"input",5),n.NdJ("ngModelChange",function(a){return g.loginModel.email=a}),n.qZA(),n.YNc(11,O,2,0,"div",6),n.YNc(12,P,2,0,"div",6),n.TgZ(13,"input",7),n.NdJ("ngModelChange",function(a){return g.loginModel.password=a}),n.qZA(),n.YNc(14,v,2,0,"div",6),n.YNc(15,_,2,0,"div",6),n.TgZ(16,"button",8),n.NdJ("click",function(){return g.onLoginSubmit()}),n._uU(17,"LOG IN"),n.qZA(),n._UZ(18,"br"),n.TgZ(19,"button",9),n._uU(20,"REGISTER"),n.qZA(),n.TgZ(21,"a",10),n._uU(22,"Forgot password"),n.qZA()()()()()()),2&t){const o=n.MAs(9);n.xp6(10),n.Q6J("ngModel",g.loginModel.email),n.xp6(1),n.Q6J("ngIf",(null==o.controls.email||null==o.controls.email.errors?null:o.controls.email.errors.required)&&(null==o.controls.email?null:o.controls.email.touched)),n.xp6(1),n.Q6J("ngIf",(null==o.controls.email||null==o.controls.email.errors?null:o.controls.email.errors.email)&&(null==o.controls.email?null:o.controls.email.touched)),n.xp6(1),n.Q6J("ngModel",g.loginModel.password),n.xp6(1),n.Q6J("ngIf",(null==o.controls.password||null==o.controls.password.errors?null:o.controls.password.errors.required)&&(null==o.controls.password?null:o.controls.password.touched)),n.xp6(1),n.Q6J("ngIf",(null==o.controls.password||null==o.controls.password.errors?null:o.controls.password.errors.minlength)&&(null==o.controls.password?null:o.controls.password.touched))}},dependencies:[m.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.on,l.On,l.F],styles:[".login-container[_ngcontent-%COMP%]{width:100%;height:100vh;padding:20px;display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:50%;height:auto;box-shadow:0 0 5px #00000083;padding:30px}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{width:100%;height:auto;text-align:center}.login-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4b5056;font-family:brandon-grotesque,brandon,martel-sans,sans-serif;font-size:20px;font-weight:700}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]{width:100%;height:auto}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:80%;height:auto}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px 8px;margin-top:10px;width:100%;border:1px solid rgb(173,216,230);font-family:open_sans,Open Sans,sans-serif}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding-top:5px;padding-bottom:5px;margin-top:10px;border:1px solid #1bb0e6;cursor:pointer}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #login[_ngcontent-%COMP%]{background-color:#1bb0e6;color:#fff;font-weight:700;border-color:#1bb0e6}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #register[_ngcontent-%COMP%]{background-color:#fff;color:#1bb0e6}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #register[_ngcontent-%COMP%]:hover{background-color:#1bb0e6;color:#fff}.login-container[_ngcontent-%COMP%]   .login-fields[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a9aeb2;margin-top:20px;height:5vh}@media (max-width: 767px){.login-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:95%;padding:1px}.login-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]})),i})()}];let y=(()=>{var r;class i{}return r=i,(0,e.Z)(i,"\u0275fac",function(t){return new(t||r)}),(0,e.Z)(i,"\u0275mod",n.oAB({type:r})),(0,e.Z)(i,"\u0275inj",n.cJS({imports:[d.Bz.forChild(Z),d.Bz]})),i})();var A=s(617);let w=(()=>{var r;class i{}return r=i,(0,e.Z)(i,"\u0275fac",function(t){return new(t||r)}),(0,e.Z)(i,"\u0275mod",n.oAB({type:r})),(0,e.Z)(i,"\u0275inj",n.cJS({imports:[m.ez,y,l.u5,l.UX,A.Ps]})),i})()}}]);