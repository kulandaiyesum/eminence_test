"use strict";(self.webpackChunkeminence_ui=self.webpackChunkeminence_ui||[]).push([[475],{8475:(K,N,u)=>{u.r(N),u.d(N,{MasterModule:()=>xo});var a=u(1180),_=u(6814),Z=u(1896),d=u(9538),C=u(1476),g=u(3566),s=u(6223),p=u(9347);class b{constructor(){(0,a.Z)(this,"packageName",void 0),(0,a.Z)(this,"questionsCount",void 0),(0,a.Z)(this,"amount",void 0),(0,a.Z)(this,"rate",void 0),(0,a.Z)(this,"durationType",void 0),(0,a.Z)(this,"type",void 0),(0,a.Z)(this,"_id",void 0)}}var t=u(5879),k=u(8773),O=u(2425),T=u(4170),M=u(617);function V(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Package name is required"),t.qZA())}function W(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Package type is required"),t.qZA())}function X(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Questions count is required"),t.qZA())}function tt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",7)(1,"label",21),t._uU(2,"Questions Count (per month)"),t.qZA(),t.TgZ(3,"input",22),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.package.questionsCount=o)})("keydown",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.restrictInput(o))}),t.qZA(),t.TgZ(4,"div",10),t.YNc(5,X,2,0,"mat-error",11),t.qZA()()}if(2&n){const c=t.oxw();t.xp6(3),t.Q6J("ngModel",c.package.questionsCount),t.xp6(2),t.Q6J("ngIf",c.packageForm.controls.questionsCount.hasError("required")&&c.packageForm.controls.questionsCount.touched)}}function et(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Amount is required"),t.qZA())}function nt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",7)(1,"label",23),t._uU(2,"Amount"),t.qZA(),t.TgZ(3,"input",24),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.package.amount=o)}),t.qZA(),t.TgZ(4,"div",10),t.YNc(5,et,2,0,"mat-error",11),t.qZA()()}if(2&n){const c=t.oxw();t.xp6(3),t.Q6J("ngModel",c.package.amount),t.xp6(2),t.Q6J("ngIf",c.packageForm.controls.amount.hasError("required")&&c.packageForm.controls.amount.touched)}}function ot(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Rate per question is required"),t.qZA())}function it(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",7)(1,"label",25),t._uU(2,"Rate (per question)"),t.qZA(),t.TgZ(3,"input",26),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.package.rate=o)}),t.qZA(),t.TgZ(4,"div",10),t.YNc(5,ot,2,0,"mat-error",11),t.qZA()()}if(2&n){const c=t.oxw();t.xp6(3),t.Q6J("ngModel",c.package.rate),t.xp6(2),t.Q6J("ngIf",c.packageForm.controls.rate.hasError("required")&&c.packageForm.controls.rate.touched)}}function at(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Duration type is required"),t.qZA())}function rt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",7)(1,"label",27),t._uU(2,"Duration Type"),t.qZA(),t.TgZ(3,"select",28),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.package.durationType=o)}),t.TgZ(4,"option",14),t._uU(5,"select duration type"),t.qZA(),t.TgZ(6,"option",29),t._uU(7,"Monthly"),t.qZA(),t.TgZ(8,"option",30),t._uU(9,"Quarterly"),t.qZA(),t.TgZ(10,"option",31),t._uU(11,"Half-yearly"),t.qZA(),t.TgZ(12,"option",32),t._uU(13,"Annually"),t.qZA()(),t.TgZ(14,"div",10),t.YNc(15,at,2,0,"mat-error",11),t.qZA()()}if(2&n){const c=t.oxw();t.xp6(3),t.Q6J("ngModel",c.package.durationType),t.xp6(12),t.Q6J("ngIf",c.packageForm.controls.durationType.hasError("required")&&c.packageForm.controls.durationType.touched)}}const ct=function(n,i){return{"valid-form":n,"invalid-form":i}};function st(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.onPackageSubmit())}),t._uU(1," Add "),t.qZA()}if(2&n){const c=t.oxw();t.Q6J("ngClass",t.WLB(1,ct,c.packageForm.valid,!c.packageForm.valid))}}function lt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.updatePackage())}),t._uU(1," Update "),t.qZA()}if(2&n){const c=t.oxw();t.Q6J("disabled",c.packageForm.invalid)}}let B=(()=>{var n;class i{constructor(e,o,r,l,m){(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"packageService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"cdr",void 0),(0,a.Z)(this,"packageForm",void 0),(0,a.Z)(this,"visibleUpdate",!1),(0,a.Z)(this,"package",void 0),this.dialogRef=e,this.packageService=o,this.toastr=r,this.data=l,this.cdr=m}ngOnInit(){this.package=new b,null!==this.data?(this.package._id=this.data._id,this.package.amount=this.data.amount,this.package.durationType=this.data.durationType,this.package.packageName=this.data.packageName,this.package.questionsCount=this.data.questionsCount,this.package.rate=this.data.rate,this.package.type=this.data.type,this.visibleUpdate=!0):this.package=new b,this.initForm(),this.packageForm.get("type").valueChanges.subscribe(e=>{"B2C"===e?(this.packageForm.get("questionsCount").disable(),this.packageForm.get("rate").disable(),this.package.questionsCount="",this.package.rate="-",this.package.questionsCount="UNLIMITED"):(this.packageForm.get("questionsCount").enable(),this.packageForm.get("rate").enable()),this.cdr.detectChanges()})}initForm(){this.packageForm=new s.cw({packageName:new s.NI("",s.kI.required),questionsCount:new s.NI(0,s.kI.required),amount:new s.NI(0,s.kI.required),rate:new s.NI(0,s.kI.required),durationType:new s.NI("",s.kI.required),type:new s.NI("",s.kI.required)})}closeDialog(){this.dialogRef.close()}onPackageSubmit(){this.packageService.createPackage(this.package).subscribe(e=>{this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)},e=>{console.log(e),this.toastr.error(e.error.message,"",{timeOut:3e3})})}resetForm(){this.packageForm.reset()}updatePackage(){this.packageService.updatePackage(this.package).subscribe(e=>{this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e),this.visibleUpdate=!0},e=>{this.toastr.error(e.message,"",{timeOut:3e3})})}onNoClick(){this.dialogRef.close()}restrictInput(e){/[^0-9]/.test(e.key)&&"Backspace"!==e.key&&"Delete"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&e.preventDefault()}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(p.so),t.Y36(k.M),t.Y36(O._W),t.Y36(p.WI),t.Y36(t.sBO))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-package-popup"]],decls:35,vars:12,consts:[[1,"form_crud"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"form_wrap"],[1,"form_heading"],[3,"formGroup"],[1,"flex_form"],[1,"row_group"],[1,"form-group","custom_group"],["for","packageName"],["type","text","id","packageName","name","packageName","formControlName","packageName",1,"form-control",3,"ngModel","ngModelChange"],[1,"error"],[4,"ngIf"],["for","type"],["id","type","name","type","formControlName","type","aria-label","select package type",1,"form-select",3,"ngModel","ngModelChange"],["disabled","","selected","","value",""],["value","B2B"],["value","B2C"],["class","form-group custom_group",4,"ngIf"],[1,"form_btns"],["type","submit",3,"ngClass","click",4,"ngIf"],["type","submit",3,"disabled","click",4,"ngIf"],["for","questionsCount"],["type","tel","id","questionsCount","name","questionsCount","formControlName","questionsCount",1,"form-control",3,"ngModel","ngModelChange","keydown"],["for","amount"],["type","text","id","amount","name","amount","formControlName","amount",1,"form-control",3,"ngModel","ngModelChange"],["for","rate"],["type","text","id","rate","name","rate","formControlName","rate",1,"form-control",3,"ngModel","ngModelChange"],["for","duration_type"],["name","durationTyype","formControlName","durationType","id","duration_type",1,"form-select",3,"ngModel","ngModelChange"],["value","monthly"],["value","quarterly"],["value","half-yearly"],["value","annually"],["type","submit",3,"ngClass","click"],["type","submit",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-icon",1),t.NdJ("click",function(){return o.onNoClick()}),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t._uU(5),t.qZA(),t.TgZ(6,"form",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),t._uU(11,"Package name"),t.qZA(),t.TgZ(12,"input",9),t.NdJ("ngModelChange",function(l){return o.package.packageName=l}),t.qZA(),t.TgZ(13,"div",10),t.YNc(14,V,2,0,"mat-error",11),t.qZA()()(),t.TgZ(15,"div",6)(16,"div",7)(17,"label",12),t._uU(18,"Type"),t.qZA(),t.TgZ(19,"select",13),t.NdJ("ngModelChange",function(l){return o.package.type=l}),t.TgZ(20,"option",14),t._uU(21,"select type"),t.qZA(),t.TgZ(22,"option",15),t._uU(23,"B2B"),t.qZA(),t.TgZ(24,"option",16),t._uU(25,"B2C"),t.qZA()(),t.TgZ(26,"div",10),t.YNc(27,W,2,0,"mat-error",11),t.qZA()()()(),t.YNc(28,tt,6,2,"div",17),t.YNc(29,nt,6,2,"div",17),t.YNc(30,it,6,2,"div",17),t.YNc(31,rt,16,2,"div",17),t.TgZ(32,"div",18),t.YNc(33,st,2,4,"button",19),t.YNc(34,lt,2,1,"button",20),t.qZA()()()()),2&e&&(t.xp6(5),t.hij(" ",o.visibleUpdate?"Edit Package":"Add Package"," "),t.xp6(1),t.Q6J("formGroup",o.packageForm),t.xp6(6),t.Q6J("ngModel",o.package.packageName),t.xp6(2),t.Q6J("ngIf",o.packageForm.controls.packageName.hasError("required")&&o.packageForm.controls.packageName.touched),t.xp6(5),t.Q6J("ngModel",o.package.type),t.xp6(8),t.Q6J("ngIf",o.packageForm.controls.type.hasError("required")&&o.packageForm.controls.type.touched),t.xp6(1),t.Q6J("ngIf","B2B"===o.package.type),t.xp6(1),t.Q6J("ngIf","B2B"===o.package.type||"B2C"===o.package.type),t.xp6(1),t.Q6J("ngIf","B2B"===o.package.type),t.xp6(1),t.Q6J("ngIf","B2B"===o.package.type||"B2C"===o.package.type),t.xp6(2),t.Q6J("ngIf",!o.visibleUpdate),t.xp6(1),t.Q6J("ngIf",o.visibleUpdate))},dependencies:[_.mk,_.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,T.TO,M.Hw],styles:[".form_crud[_ngcontent-%COMP%]{padding:40px;position:relative;max-height:100%!important;overflow-y:auto}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]{position:absolute;top:30px;transform:translateY(-50%);right:25px;cursor:pointer}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]:hover{color:#555}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   .form_heading[_ngcontent-%COMP%]{font-size:20px;color:#4b5056;font-weight:700;margin-bottom:10px;text-align:center}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:4px;height:auto}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .row_group[_ngcontent-%COMP%]{width:48%}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]{margin-bottom:10px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-bottom:5px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]{width:100%}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;text-align:center;padding:8px 16px;margin-top:20px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button.valid-form[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);color:#fff}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button.invalid-form[_ngcontent-%COMP%]{background-color:#ccc;color:#000;cursor:not-allowed}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover.valid-form, .form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:hover{background-color:#57c4ff}.form_crud[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{line-height:20px!important;height:20px!important;font-size:14px}"]})),i})();var dt=u(3519),x=u.n(dt),v=u(9862),f=u(553);let y=(()=>{var n;class i{constructor(e){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"headers",(new v.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${this.gettingToken()}`)),(0,a.Z)(this,"getAllInstituteURL",f.N.localdomain+"institution/getAll"),(0,a.Z)(this,"createInstituteURL",f.N.localdomain+"institution/save"),(0,a.Z)(this,"updateInstituteURL",f.N.localdomain+"institution/update"),(0,a.Z)(this,"deleteInstituteURL",f.N.localdomain+"institution/delete"),this.http=e}gettingToken(){return localStorage.getItem("1")}createInstitute(e){return this.http.post(`${this.createInstituteURL}`,e)}getAllInstitute(){return this.http.get(this.getAllInstituteURL)}updateInstitution(e){return this.http.put(this.updateInstituteURL,e)}deleteInstitution(e){return this.http.delete(this.deleteInstituteURL,{body:e})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(v.eN))}),(0,a.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})(),A=(()=>{var n;class i{constructor(e){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"baseUrl",f.N.localdomain+"subscription"),(0,a.Z)(this,"createSubscriptionUrl",f.N.localdomain+"subscription/save"),(0,a.Z)(this,"createSubscriptionUrlAutoDate",f.N.localdomain+"subscription/getDate"),(0,a.Z)(this,"updateSubscriptionUrl",f.N.localdomain+"subscription/update"),(0,a.Z)(this,"deleteSubscriptionUrl",f.N.localdomain+"subscription/delete"),this.http=e}getAllSubscriptions(){return this.http.get(this.baseUrl+"/getAll")}createSubscription(e){return this.http.post(`${this.createSubscriptionUrl}`,e)}createSubscriptionAuto(e){return this.http.post(`${this.createSubscriptionUrlAutoDate}`,e)}updateSubscription(e){return this.http.put(this.updateSubscriptionUrl,e)}deleteSubscription(e){return this.http.delete(this.deleteSubscriptionUrl,{body:e})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(v.eN))}),(0,a.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();var S=u(2296);function ut(n,i){1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1,"PACKAGE NAME"),t.qZA())}function pt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.packageName)}}function gt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1,"TYPE"),t.qZA())}function _t(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.type)}}function mt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1,"QUESTIONS PER PACKAGE"),t.qZA())}function ht(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.questionsCount)}}function ft(n,i){1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1,"AMOUNT"),t.qZA())}function Ct(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.amount)}}function Mt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1,"RATE"),t.qZA())}function Ot(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.rate)}}function Pt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",27),t._uU(1,"DURATION"),t.qZA())}function bt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.durationType)}}function xt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"ACTION"),t.qZA())}function Zt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"mat-cell")(1,"mat-icon",28),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.editPackage(r))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",28),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.deletePackage(r))}),t._uU(4,"delete"),t.qZA()()}}function vt(n,i){1&n&&t._UZ(0,"mat-header-row")}function Tt(n,i){1&n&&t._UZ(0,"mat-row")}const wt=function(){return[5,10,25,100]};let kt=(()=>{var n;class i{constructor(e,o,r,l,m){(0,a.Z)(this,"packageService",void 0),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"instituteService",void 0),(0,a.Z)(this,"subscriptionService",void 0),(0,a.Z)(this,"displayedColumns",["packageName","type","questionsCount","amount","rate","durationType","action"]),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"paginator",void 0),(0,a.Z)(this,"sort",void 0),(0,a.Z)(this,"packageData",void 0),(0,a.Z)(this,"instituteDetails",[]),(0,a.Z)(this,"subscriptionList",[]),this.packageService=e,this.dialog=o,this.toastr=r,this.instituteService=l,this.subscriptionService=m}ngOnInit(){this.loadPackageData(),this.getAllDataOfSubscription()}loadPackageData(){this.packageService.getAllPackages().subscribe(e=>{this.packageData=e.result,this.packageData.forEach(o=>{"b2c"===o.type&&(o.questionsCount="UNLIMITED")}),this.dataSource=new d.by(this.packageData),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e=>{this.toastr.error(e.message,"",{timeOut:3e3})})}getAllInstituteData(){this.instituteService.getAllInstitute().subscribe(e=>{this.instituteDetails=e.result},e=>{console.error("Not data get",e)})}getAllDataOfSubscription(){this.subscriptionService.getAllSubscriptions().subscribe(e=>{this.subscriptionList=e.result})}openAddPackagePopup(){this.dialog.open(B,{width:"600px",margin:"0 auto"}).afterClosed().subscribe(r=>{void 0!==r&&this.loadPackageData()})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}editPackage(e){this.dialog.open(B,{width:"600px",margin:"0 auto",data:e}).afterClosed().subscribe(l=>{void 0!==l&&this.loadPackageData()})}deletePackage(e){this.subscriptionList.some(r=>r.packageId._id===e._id)?x().fire({title:"You cannot delete package in use",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}):x().fire({title:"Are you sure?",text:"You are about to delete this package.",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&this.packageService.deletePackage(e).subscribe(l=>{this.toastr.success(l.message,"",{timeOut:3e3}),this.loadPackageData()},l=>{this.toastr.error(l.message,"",{timeOut:3e3})})})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(k.M),t.Y36(p.uw),t.Y36(O._W),t.Y36(y),t.Y36(A))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-package"]],viewQuery:function(e,o){if(1&e&&(t.Gf(C.NW,5),t.Gf(g.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:40,vars:7,consts:[[1,"package-container"],[1,"h2","mb-5","text-center"],[1,"main"],[1,"search_and_add"],[1,"search_box"],[1,"search_field"],["placeholder","Search Here",1,"form-control",3,"keyup"],["input",""],[1,"add_btn"],["mat-raised-button","",3,"click"],[1,"data-area"],[1,"data"],[1,"table"],["matSort","","matPaginator","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","packageName"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","type"],["matColumnDef","questionsCount"],["matColumnDef","amount"],["matColumnDef","rate"],["matColumnDef","durationType"],["matColumnDef","action"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","pageIndex"],["mat-sort-header",""],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Package Master"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6,7),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return o.openAddPackagePopup()}),t._uU(11," Add Package "),t.qZA()()(),t.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"mat-table",13),t.ynx(16,14),t.YNc(17,ut,2,0,"mat-header-cell",15),t.YNc(18,pt,2,1,"mat-cell",16),t.BQk(),t.ynx(19,17),t.YNc(20,gt,2,0,"mat-header-cell",15),t.YNc(21,_t,2,1,"mat-cell",16),t.BQk(),t.ynx(22,18),t.YNc(23,mt,2,0,"mat-header-cell",15),t.YNc(24,ht,2,1,"mat-cell",16),t.BQk(),t.ynx(25,19),t.YNc(26,ft,2,0,"mat-header-cell",15),t.YNc(27,Ct,2,1,"mat-cell",16),t.BQk(),t.ynx(28,20),t.YNc(29,Mt,2,0,"mat-header-cell",15),t.YNc(30,Ot,2,1,"mat-cell",16),t.BQk(),t.ynx(31,21),t.YNc(32,Pt,2,0,"mat-header-cell",15),t.YNc(33,bt,2,1,"mat-cell",16),t.BQk(),t.ynx(34,22),t.YNc(35,xt,2,0,"mat-header-cell",23),t.YNc(36,Zt,5,0,"mat-cell",16),t.BQk(),t.YNc(37,vt,1,0,"mat-header-row",24),t.YNc(38,Tt,1,0,"mat-row",25),t.qZA(),t._UZ(39,"mat-paginator",26),t.qZA()()()()()),2&e&&(t.xp6(15),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,wt))("pageSize",5)("pageIndex",0))},dependencies:[S.lW,M.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.YE,g.nU,C.NW],styles:[".package-container[_ngcontent-%COMP%]{width:100%;height:85vh;padding:20px}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{margin:0 auto}.package-container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.package-container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.package-container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.package-container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);padding:8px 16px;border:none;color:#fff;font-size:16px;border-radius:4px;transition:background-color .3s ease}.package-container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:80%;height:85vh}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:100%;height:auto}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:auto;height:auto}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;justify-content:right}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1bb0e6;color:#fff}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   #remove[_ngcontent-%COMP%]{margin-left:20px}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:20px}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:32%;border:1px solid #1bb0e6;padding:5px;border-radius:2px}@media (max-width: 768px){.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]{width:auto;height:auto;margin-top:15px;box-shadow:0 0 10px #00000080}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{background-color:#1bb0e6;color:#fff;font-size:16px}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#fbbf02;font-size:24px;margin:0 0 0 8px}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{z-index:1;box-shadow:0 0 10px #00000080}@media screen and (max-width: 425px){.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:100%}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:auto}.package-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]})),i})(),q=(()=>{var n;class i{constructor(){}filteredArrayWithJsonValue(e,o){let r;return r=e.map(l=>l[o]),r.filter((l,m,P)=>P.indexOf(l)===m)}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)}),(0,a.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();function yt(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Add Institution"),t.qZA())}function At(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Update Institution"),t.qZA())}function St(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," Institute name is required. "),t.qZA())}function Nt(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," Address is required. "),t.qZA())}function Ut(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," City is required. "),t.qZA())}function It(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," State is required. "),t.qZA())}function qt(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," Zip code is required. "),t.qZA())}function Dt(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," Country is required. "),t.qZA())}function Ft(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," Email is required. "),t.qZA())}function Yt(n,i){1&n&&(t.TgZ(0,"div",28),t._uU(1," Invalid email format. "),t.qZA())}function Jt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.onInstituteSubmit())}),t._uU(1," Submit "),t.qZA()}if(2&n){t.oxw();const c=t.MAs(11);t.Q6J("disabled",c.invalid)}}function Rt(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.updateInstitute())}),t._uU(1," Update "),t.qZA()}if(2&n){t.oxw();const c=t.MAs(11);t.Q6J("disabled",c.invalid)}}let j=(()=>{var n;class i{constructor(e,o,r,l,m,P,h,E){(0,a.Z)(this,"formBuilder",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"instituteService",void 0),(0,a.Z)(this,"packageService",void 0),(0,a.Z)(this,"logicalService",void 0),(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"instituteForm",void 0),(0,a.Z)(this,"hidePassword",!0),(0,a.Z)(this,"secretKeyLength",32),(0,a.Z)(this,"secretKey",f.N.secretKey),(0,a.Z)(this,"visibleUpdate",!1),(0,a.Z)(this,"items",void 0),(0,a.Z)(this,"packageList",void 0),(0,a.Z)(this,"unqiuePackage",[]),(0,a.Z)(this,"isPackageSelected",!0),(0,a.Z)(this,"selectedDurationType",void 0),(0,a.Z)(this,"calculatedEndDate",void 0),(0,a.Z)(this,"institutionModel",{name:"",email:"",_id:"",address:"",state:"",zip:"",packageName:"",questionsCount:"",packageNameId:"",city:"",startdate:new Date,enddate:new Date,durationType:"",country:"",questionsCountResetDate:new Date}),(0,a.Z)(this,"minDate",this.calculateMinDate()),this.formBuilder=e,this.router=o,this.toastr=r,this.instituteService=l,this.packageService=m,this.logicalService=P,this.data=h,this.dialogRef=E,this.items=h,null!=h&&(console.log(h),this.visibleUpdate=!0,this.institutionModel.name=h.name,this.institutionModel.email=h.email,this.institutionModel._id=h._id,this.institutionModel.address=h.address,this.institutionModel.state=h.state,this.institutionModel.zip=h.zip,this.institutionModel.city=h.city,this.institutionModel.country=h.country)}ngOnInit(){this.initForm(),this.getPackageData()}initForm(){this.instituteForm=this.formBuilder.group({name:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],_id:[""],address:["",s.kI.required],state:["",s.kI.required],zip:["",s.kI.required],city:["",s.kI.required],country:["",s.kI.required],startdate:[new Date,s.kI.required],enddate:[new Date,s.kI.required]})}calculateMinDate(){const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}getPackageData(){this.packageService.getAllPackages().subscribe(e=>{this.packageList=e.result.filter(o=>"B2B"===o.type),console.log(this.packageList),this.unqiuePackage=this.logicalService.filteredArrayWithJsonValue(this.packageList,"packageName")})}calculateEndDate(){const e=new Date(this.institutionModel.startdate);let o;switch(this.selectedDurationType){case"monthly":o=new Date(e),o.setDate(e.getDate()+29);break;case"quarterly":o=new Date(e),o.setDate(e.getDate()+89);break;case"half-yearly":o=new Date(e),o.setDate(e.getDate()+179);break;case"annually":o=new Date(e),o.setDate(e.getDate()+364);break;default:o=null}if(this.institutionModel.enddate=new Date(o?o.toISOString().substring(0,10):""),o){const r=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),m=String(o.getDate()).padStart(2,"0");this.calculatedEndDate=`${m}/${l}/${r}`}else this.calculatedEndDate=""}togglePasswordVisibility(e){e.preventDefault(),this.hidePassword=!this.hidePassword}closeDialog(){this.dialogRef.close()}getPackgeType(e){this.isPackageSelected=!1;let o=this.packageList.find(r=>r.packageName===e);this.institutionModel.questionsCount=o.questionsCount,this.institutionModel.packageNameId=o._id,this.institutionModel.durationType=o.durationType,this.selectedDurationType=this.institutionModel.durationType}onInstituteSubmit(){this.instituteForm.controls.email.setValue(this.institutionModel.email),this.instituteForm.controls.name.setValue(this.institutionModel.name),this.instituteForm.controls.address.setValue(this.institutionModel.address),this.instituteForm.controls.state.setValue(this.institutionModel.state),this.instituteForm.controls.zip.setValue(this.institutionModel.zip),this.instituteForm.controls.city.setValue(this.institutionModel.city),this.instituteForm.controls.country.setValue(this.institutionModel.country),this.instituteForm.controls.startdate.setValue(this.institutionModel.startdate),this.instituteForm.controls.enddate.setValue(this.institutionModel.enddate),this.instituteForm.valid&&(this.closeDialog(),this.instituteService.createInstitute(this.institutionModel).subscribe(e=>{console.log(e),this.toastr.success(e.message,"",{timeOut:3e3})},e=>{this.toastr.error(e.error.message,"",{timeOut:3e3}),console.error("Not data get",e)}))}updateInstitute(){this.instituteForm.controls.email.setValue(this.institutionModel.email),this.instituteForm.controls.name.setValue(this.institutionModel.name),this.instituteForm.controls.address.setValue(this.institutionModel.address),this.instituteForm.controls.state.setValue(this.institutionModel.state),this.instituteForm.controls.zip.setValue(this.institutionModel.zip),this.instituteForm.controls.city.setValue(this.institutionModel.city),this.instituteForm.controls.country.setValue(this.institutionModel.country),this.instituteForm.controls.startdate.setValue(this.institutionModel.startdate),this.instituteForm.controls.enddate.setValue(this.institutionModel.enddate),this.instituteForm.controls._id.setValue(this.institutionModel._id),this.instituteForm.valid&&this.instituteService.updateInstitution(this.institutionModel).subscribe(e=>{console.log(e),this.toastr.success(e.message,"",{timeOut:3e3}),this.closeDialog()},e=>{this.toastr.error(e.error.message,"",{timeOut:3e3}),console.error("Not data get",e)})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(s.qu),t.Y36(Z.F0),t.Y36(O._W),t.Y36(y),t.Y36(k.M),t.Y36(q),t.Y36(p.WI),t.Y36(p.so))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-institute-popup"]],decls:55,vars:20,consts:[[1,"main"],[1,"data"],[1,"heading"],[1,"icon"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"head"],[4,"ngIf"],[1,"forms"],["instituteForm","ngForm"],[1,"part-input"],[1,"sub-part-input"],["for","name"],["type","text","placeholder","Name","name","name","required","",3,"ngModel","ngModelChange"],["class","error-message",4,"ngIf"],["for","address"],["type","text","placeholder","Address","name","address","required","",3,"ngModel","ngModelChange"],["for","city"],["type","text","placeholder","City","name","city","required","",3,"ngModel","ngModelChange"],["for","state"],["type","text","placeholder","State","name","state","required","",3,"ngModel","ngModelChange"],["for","zip"],["type","number","placeholder","Zip","name","zip","required","",3,"ngModel","ngModelChange"],["for","country"],["type","text","placeholder","Country","name","country","required","",3,"ngModel","ngModelChange"],[1,"email"],["for","email"],["type","text","placeholder","Email","name","email","required","","email","",3,"ngModel","value","ngModelChange"],["type","submit",3,"disabled","click",4,"ngIf"],[1,"error-message"],["type","submit",3,"disabled","click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.NdJ("click",function(){return o.closeDialog()}),t._uU(5,"close"),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,yt,2,0,"h2",6),t.YNc(8,At,2,0,"h2",6),t.qZA()(),t.TgZ(9,"div",7)(10,"form",null,8)(12,"div",9)(13,"div",10)(14,"label",11),t._uU(15,"Institution Name"),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"input",12),t.NdJ("ngModelChange",function(l){return o.institutionModel.name=l}),t.qZA(),t.YNc(18,St,2,0,"div",13),t.qZA(),t.TgZ(19,"div",10)(20,"label",14),t._uU(21,"Address"),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"input",15),t.NdJ("ngModelChange",function(l){return o.institutionModel.address=l}),t.qZA(),t.YNc(24,Nt,2,0,"div",13),t.qZA()(),t.TgZ(25,"div",9)(26,"div",10)(27,"label",16),t._uU(28,"City"),t.qZA(),t.TgZ(29,"input",17),t.NdJ("ngModelChange",function(l){return o.institutionModel.city=l}),t.qZA(),t.YNc(30,Ut,2,0,"div",13),t.qZA(),t.TgZ(31,"div",10)(32,"label",18),t._uU(33,"State"),t.qZA(),t.TgZ(34,"input",19),t.NdJ("ngModelChange",function(l){return o.institutionModel.state=l}),t.qZA(),t.YNc(35,It,2,0,"div",13),t.qZA()(),t.TgZ(36,"div",9)(37,"div",10)(38,"label",20),t._uU(39,"Zip"),t.qZA(),t.TgZ(40,"input",21),t.NdJ("ngModelChange",function(l){return o.institutionModel.zip=l}),t.qZA(),t.YNc(41,qt,2,0,"div",13),t.qZA(),t.TgZ(42,"div",10)(43,"label",22),t._uU(44,"Country"),t.qZA(),t.TgZ(45,"input",23),t.NdJ("ngModelChange",function(l){return o.institutionModel.country=l}),t.qZA(),t.YNc(46,Dt,2,0,"div",13),t.qZA()(),t.TgZ(47,"div",24)(48,"label",25),t._uU(49,"Email"),t.qZA(),t.TgZ(50,"input",26),t.NdJ("ngModelChange",function(l){return o.institutionModel.email=l}),t.qZA(),t.YNc(51,Ft,2,0,"div",13),t.YNc(52,Yt,2,0,"div",13),t.qZA(),t.YNc(53,Jt,2,1,"button",27),t.YNc(54,Rt,2,1,"button",27),t.qZA()()()()),2&e){const r=t.MAs(11);t.xp6(7),t.Q6J("ngIf",null===o.items),t.xp6(1),t.Q6J("ngIf",null!==o.items),t.xp6(9),t.Q6J("ngModel",o.institutionModel.name),t.xp6(1),t.Q6J("ngIf",(null==r.controls.name||null==r.controls.name.errors?null:r.controls.name.errors.required)&&(null==r.controls.name?null:r.controls.name.touched)),t.xp6(5),t.Q6J("ngModel",o.institutionModel.address),t.xp6(1),t.Q6J("ngIf",(null==r.controls.address||null==r.controls.address.errors?null:r.controls.address.errors.required)&&(null==r.controls.address?null:r.controls.address.touched)),t.xp6(5),t.Q6J("ngModel",o.institutionModel.city),t.xp6(1),t.Q6J("ngIf",(null==r.controls.city||null==r.controls.city.errors?null:r.controls.city.errors.required)&&(null==r.controls.city?null:r.controls.city.touched)),t.xp6(4),t.Q6J("ngModel",o.institutionModel.state),t.xp6(1),t.Q6J("ngIf",(null==r.controls.state||null==r.controls.state.errors?null:r.controls.state.errors.required)&&(null==r.controls.state?null:r.controls.state.touched)),t.xp6(5),t.Q6J("ngModel",o.institutionModel.zip),t.xp6(1),t.Q6J("ngIf",(null==r.controls.zip||null==r.controls.zip.errors?null:r.controls.zip.errors.required)&&(null==r.controls.zip?null:r.controls.zip.touched)),t.xp6(4),t.Q6J("ngModel",o.institutionModel.country),t.xp6(1),t.Q6J("ngIf",(null==r.controls.country||null==r.controls.country.errors?null:r.controls.country.errors.required)&&(null==r.controls.country?null:r.controls.country.touched)),t.xp6(4),t.Q6J("ngModel",o.institutionModel.email)("value",o.minDate),t.xp6(1),t.Q6J("ngIf",(null==r.controls.email||null==r.controls.email.errors?null:r.controls.email.errors.required)&&(null==r.controls.email?null:r.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",(null==r.controls.email||null==r.controls.email.errors?null:r.controls.email.errors.email)&&(null==r.controls.email?null:r.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",!o.visibleUpdate),t.xp6(1),t.Q6J("ngIf",o.visibleUpdate)}},dependencies:[_.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.on,s.On,s.F,M.Hw],styles:[".main[_ngcontent-%COMP%]{width:auto;max-height:80vh;padding:40px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:auto;height:auto;padding-bottom:20px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{width:100%;height:10vh}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:#4b5056;font-weight:700}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:right}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]{min-width:100%;height:auto;display:flex;justify-content:center;padding:20px;border:1px solid #ccc}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background-color:#ccc}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:100%;height:auto}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row_group.highlight[_ngcontent-%COMP%]{background-color:#f4f6f8;padding:20px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row_group[_ngcontent-%COMP%]   .form-group.custom_group[_ngcontent-%COMP%]   label.highlight[_ngcontent-%COMP%]{background-color:transparent;padding:0 4px;margin-left:-4px;font-weight:700}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]{width:100%;height:auto;display:flex}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]   .sub-part-input[_ngcontent-%COMP%]{width:50%}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]   .sub-part-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]   .sub-part-input[_ngcontent-%COMP%]:nth-child(2){margin-left:20px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-top:10px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-top:5px;border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:14px}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:25px;width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select.form-select[_ngcontent-%COMP%]   option.selected[_ngcontent-%COMP%]{background-color:transparent;color:#57c4ff;border:1px solid #57c4ff}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .package-details[_ngcontent-%COMP%]{background-color:transparent;padding:10px;margin-top:5px;border:1px solid #f0f0f0;border-radius:3px;color:#333}@media (max-width: 768px){.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]{flex-direction:column}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]   .sub-part-input[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]   .sub-part-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important}.main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .part-input[_ngcontent-%COMP%]   .sub-part-input[_ngcontent-%COMP%]:nth-child(2){margin-left:0!important}}"]})),i})();var U=u(2032),w=u(8034);function Qt(n,i){if(1&n&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("value",c._id),t.xp6(1),t.AsE(" ",c.packageName," - $",c.amount," ")}}function Et(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const c=t.oxw();t.xp6(1),t.AsE(" ",c.selectedPackageOption.questionsCount," Questions per ",c.selectedPackageOption.durationType," ")}}function Bt(n,i){1&n&&(t.TgZ(0,"div",21),t._uU(1," Start Date is required. "),t.qZA())}let jt=(()=>{var n;class i{constructor(e,o,r,l,m,P,h){(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"logicalService",void 0),(0,a.Z)(this,"packageService",void 0),(0,a.Z)(this,"formBuilder",void 0),(0,a.Z)(this,"subscriptionService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"addSubscriptionForm",void 0),(0,a.Z)(this,"packageList",void 0),(0,a.Z)(this,"unqiuePackage",[]),(0,a.Z)(this,"Packageid",[]),(0,a.Z)(this,"isPackageSelected",!0),(0,a.Z)(this,"selectedDurationType",void 0),(0,a.Z)(this,"calculatedEndDate",void 0),(0,a.Z)(this,"selectedPackageOption",void 0),(0,a.Z)(this,"institutionModel",{name:"",email:"",_id:"",address:"",state:"",zip:"",packageName:"",questionsCount:"",packageNameId:"",city:"",startdate:new Date,enddate:new Date,durationType:"",country:"",questionsCountResetDate:new Date}),(0,a.Z)(this,"maxDate",new Date),(0,a.Z)(this,"minDate",this.calculateMinDate()),(0,a.Z)(this,"dateObject",void 0),this.data=e,this.dialogRef=o,this.logicalService=r,this.packageService=l,this.formBuilder=m,this.subscriptionService=P,this.toastr=h,null!=e&&(console.log(e),this.institutionModel.name=e.name,this.institutionModel.email=e.email,this.institutionModel._id=e._id,this.institutionModel.address=e.address,this.institutionModel.state=e.state,this.institutionModel.zip=e.zip,this.institutionModel.city=e.city,this.institutionModel.country=e.country)}ngOnInit(){this.getPackageData(),this.institutionModel.startdate=new Date,console.log(this.institutionModel.startdate),this.initForm()}initForm(){this.addSubscriptionForm=this.formBuilder.group({startdate:[this.institutionModel.startdate,s.kI.required],enddate:[new Date,s.kI.required]})}closeDialog(){this.dialogRef.close()}calculateMinDate(){const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}calculateEndDate(){console.log("end date"),console.log(this.institutionModel.startdate),this.subscriptionService.createSubscriptionAuto(this.institutionModel).subscribe(r=>{this.institutionModel.questionsCountResetDate=r.result.questionsCountResetDate},r=>{console.error("Not data get",r)});const e=new Date(this.institutionModel.startdate);let o;switch(this.selectedDurationType=this.selectedPackageOption.durationType,this.selectedDurationType){case"monthly":o=new Date(e),o.setDate(e.getDate()+29);break;case"quarterly":o=new Date(e),o.setDate(e.getDate()+89);break;case"half-yearly":o=new Date(e),o.setDate(e.getDate()+179);break;case"annually":o=new Date(e),o.setDate(e.getDate()+364);break;default:o=null}if(o){const r=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),m=String(o.getDate()).padStart(2,"0");this.calculatedEndDate=`${l}/${m}/${r}`}else this.calculatedEndDate=""}getPackageData(){this.packageService.getAllPackages().subscribe(e=>{this.packageList=e.result.filter(o=>"B2B"===o.type),this.unqiuePackage=this.logicalService.filteredArrayWithJsonValue(this.packageList,"packageName")})}getPackgeType(e){this.isPackageSelected=!1;let o=this.packageList.find(r=>r.packageName===e);this.institutionModel.questionsCount=o.questionsCount,this.institutionModel.packageNameId=o._id,this.institutionModel.durationType=o.durationType,this.selectedDurationType=this.institutionModel.durationType}selectedPackage(e){this.institutionModel.startdate=new Date;const o=e.target.value;if("package"!==o){const r=this.packageList.find(l=>l._id===o);r?(this.isPackageSelected=!1,this.selectedPackageOption=r,console.log(this.selectedPackageOption),this.institutionModel.packageNameId=this.selectedPackageOption._id,this.institutionModel.packageName=this.selectedPackageOption.packageName,this.institutionModel.questionsCount=this.selectedPackageOption.questionsCount,this.institutionModel.durationType=this.selectedPackageOption.durationType,this.calculateEndDate(),this.subscriptionService.createSubscriptionAuto(this.institutionModel).subscribe(l=>{this.institutionModel.startdate=new Date(l.result.startDate),this.institutionModel.enddate=new Date(l.result.endDate),this.institutionModel.questionsCountResetDate=l.result.questionsCountResetDate;const m=this.institutionModel.enddate,P=String(m.getDate()).padStart(2,"0"),h=String(m.getMonth()+1).padStart(2,"0"),E=m.getFullYear();this.calculatedEndDate=`${P}/${h}/${E}`},l=>{console.error("Not data get",l)})):console.log("No package selected")}}onSubscriptionSubmit(){this.addSubscriptionForm.controls.startdate.setValue(this.institutionModel.startdate),this.addSubscriptionForm.controls.enddate.setValue(this.institutionModel.enddate),this.addSubscriptionForm.valid&&(console.log(this.institutionModel),this.subscriptionService.createSubscription(this.institutionModel).subscribe(e=>{console.log(e),this.toastr.success(e.message,"",{positionClass:"toast-top-center",timeOut:1e3}),this.closeDialog()},e=>{this.toastr.error(e.error.message,"",{positionClass:"toast-top-center",timeOut:1e3}),console.error("Not data get",e)}))}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(p.WI),t.Y36(p.so),t.Y36(q),t.Y36(k.M),t.Y36(s.qu),t.Y36(A),t.Y36(O._W))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-add-subscription"]],decls:32,vars:10,consts:[[1,"add-subscription-container"],[1,"main"],[1,"heading"],[1,"icon"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"head"],[1,"forms"],["addSubscriptionForm","ngForm"],["name","package","id","packages",3,"change"],["value","package"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"dates"],["for","startdate"],["id","date"],["matInput","","name","startdate","required","",3,"matDatepicker","ngModel","min","disabled","ngModelChange","dateChange"],["matSuffix","",3,"for"],["picker",""],["class","error-message",4,"ngIf"],["type","submit",3,"disabled","click"],[3,"value"],[1,"error-message"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.NdJ("click",function(){return o.closeDialog()}),t._uU(5,"close"),t.qZA()(),t.TgZ(6,"div",5)(7,"h2"),t._uU(8,"Add Subscription"),t.qZA()()(),t.TgZ(9,"div",6)(10,"form",null,7)(12,"select",8),t.NdJ("change",function(l){return o.selectedPackage(l)}),t.TgZ(13,"option",9),t._uU(14,"Select package"),t.qZA(),t.YNc(15,Qt,2,3,"option",10),t.qZA(),t.YNc(16,Et,2,2,"p",11),t.TgZ(17,"div",12)(18,"label",13),t._uU(19,"Start date"),t.qZA(),t.TgZ(20,"p",14)(21,"input",15),t.NdJ("ngModelChange",function(l){return o.institutionModel.startdate=l})("dateChange",function(){return o.calculateEndDate()}),t.qZA(),t._UZ(22,"mat-datepicker-toggle",16)(23,"mat-datepicker",null,17),t.qZA(),t.TgZ(25,"p")(26,"b"),t._uU(27,"End Date :"),t.qZA(),t._uU(28),t.qZA(),t.YNc(29,Bt,2,0,"div",18),t.TgZ(30,"button",19),t.NdJ("click",function(){return o.onSubscriptionSubmit()}),t._uU(31," Submit "),t.qZA()()()()()()),2&e){const r=t.MAs(11),l=t.MAs(24);t.xp6(15),t.Q6J("ngForOf",o.packageList),t.xp6(1),t.Q6J("ngIf",o.selectedPackageOption),t.xp6(5),t.Q6J("matDatepicker",l)("ngModel",o.institutionModel.startdate)("min",o.minDate)("disabled",o.isPackageSelected),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Oqu(o.calculatedEndDate),t.xp6(1),t.Q6J("ngIf",(null==r.controls.startdate||null==r.controls.startdate.errors?null:r.controls.startdate.errors.required)&&(null==r.controls.startdate?null:r.controls.startdate.touched)),t.xp6(1),t.Q6J("disabled",r.invalid)}},dependencies:[_.sg,_.O5,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F,U.Nt,T.R9,w.Mq,w.hl,w.nW,M.Hw],styles:[".add-subscription-container[_ngcontent-%COMP%]{width:100%;height:80vh;border-radius:8px;padding:40px}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:auto;height:auto;padding:20px}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{width:100%;height:auto}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:right}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:#4b5056;font-weight:700}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]{min-width:100%;height:auto;display:flex;justify-content:center;padding:20px;border:1px solid #ccc}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background-color:#ccc}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:100%;height:auto}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row_group.highlight[_ngcontent-%COMP%]{background-color:#f4f6f8;padding:20px}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row_group[_ngcontent-%COMP%]   .form-group.custom_group[_ngcontent-%COMP%]   label.highlight[_ngcontent-%COMP%]{background-color:transparent;padding:0 4px;margin-left:-4px;font-weight:700}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-top:10px}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-top:5px;border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #date[_ngcontent-%COMP%]{display:flex}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:14px}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:25px;width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:6px 8px}@media (max-width: 768px){.add-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{padding:0}}@media (max-width: 768px){.add-subscription-container[_ngcontent-%COMP%]{padding:20px;height:auto}}"]})),i})();var D=u(2599);function zt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1,"INSTITUTION NAME"),t.qZA())}function Lt(n,i){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("ngClass",i.index%2==0?"even-row":"odd-row"),t.xp6(1),t.Oqu(c.name)}}function Ht(n,i){1&n&&(t.TgZ(0,"mat-header-cell",25),t._uU(1,"EMAIL"),t.qZA())}function $t(n,i){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("ngClass",i.index%2==0?"even-row":"odd-row"),t.xp6(1),t.Oqu(c.email)}}function Gt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",25),t._uU(1,"CITY"),t.qZA())}function Kt(n,i){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("ngClass",i.index%2==0?"even-row":"odd-row"),t.xp6(1),t.Oqu(c.city)}}function Vt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",25),t._uU(1,"STATUS"),t.qZA())}function Wt(n,i){if(1&n&&(t.TgZ(0,"mat-cell",24),t._UZ(1,"mat-slide-toggle",26),t.qZA()),2&n){const c=i.$implicit;t.Q6J("ngClass",i.index%2==0?"even-row":"odd-row"),t.xp6(1),t.Q6J("checked",1==c.status)}}function Xt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",25),t._uU(1,"ACTION"),t.qZA())}function te(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"mat-cell",24)(1,"mat-icon",27),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.updateInstitute(r))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",27),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.deleteInstitute(r))}),t._uU(4,"delete"),t.qZA()()}2&n&&t.Q6J("ngClass",i.index%2==0?"even-row":"odd-row")}function ee(n,i){1&n&&(t.TgZ(0,"mat-header-cell",28),t._uU(1,"Package"),t.qZA())}function ne(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"mat-cell",24)(1,"mat-icon",27),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.addSubscription(r))}),t._uU(2,"add"),t.qZA()()}2&n&&t.Q6J("ngClass",i.index%2==0?"even-row":"odd-row")}function oe(n,i){1&n&&t._UZ(0,"mat-header-row")}function ie(n,i){if(1&n&&t._UZ(0,"mat-row"),2&n){const c=i.even;t.ekj("odd-row",!c)("even-row",c)}}const ae=function(){return[5,10,25,100]};let re=(()=>{var n;class i{constructor(e,o,r,l,m,P){(0,a.Z)(this,"formBuilder",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"instituteService",void 0),(0,a.Z)(this,"subscriptionService",void 0),(0,a.Z)(this,"instituteForm",void 0),(0,a.Z)(this,"hidePassword",!0),(0,a.Z)(this,"secretKeyLength",32),(0,a.Z)(this,"secretKey",f.N.secretKey),(0,a.Z)(this,"elementStatus",!0),(0,a.Z)(this,"displayedColumns",["name","email","city","status","action","add"]),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"paginator",void 0),(0,a.Z)(this,"sort",void 0),(0,a.Z)(this,"instituteDetails",void 0),(0,a.Z)(this,"subscriptionList",[]),(0,a.Z)(this,"institutionModel",{name:"",email:"",_id:"",address:"",state:"",zip:"",packageName:"",questionsCount:"",packageNameId:"",city:"",startdate:new Date,enddate:new Date,durationType:"",country:"",questionsCountResetDate:new Date}),this.formBuilder=e,this.router=o,this.toastr=r,this.dialog=l,this.instituteService=m,this.subscriptionService=P}ngOnInit(){this.initForm(),this.getAllInstituteData(),this.getAllDataOfSubscription()}initForm(){this.instituteForm=this.formBuilder.group({name:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],address:["",s.kI.required],mobile:["",s.kI.required],state:["",s.kI.required],_id:[""]})}togglePasswordVisibility(e){e.preventDefault(),this.hidePassword=!this.hidePassword}toggleStatus(){this.elementStatus=!this.elementStatus}onInstituteSubmit(){console.log("submitted"),this.instituteForm.controls.email.setValue(this.institutionModel.email),this.instituteForm.controls.name.setValue(this.institutionModel.name),this.instituteForm.valid&&console.log(this.instituteForm.value)}addData(){this.dialog.open(j,{width:"600px",height:"80vh",data:null}).afterClosed().subscribe(o=>{console.log(`Dialog result: ${o}`),this.getAllInstituteData()})}getAllInstituteData(){this.instituteService.getAllInstitute().subscribe(e=>{this.instituteDetails=e.result,this.dataSource=new d.by(this.instituteDetails),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e=>{console.error("Not data get",e)})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.dataSource.sort?.sort({id:"",start:"asc",disableClear:!1})}updateInstitute(e){console.log(e),this.dialog.open(j,{width:"600px",height:"80vh",data:e}).afterClosed().subscribe(r=>{console.log(`Dialog result: ${r}`),this.getAllInstituteData()})}getAllDataOfSubscription(){this.subscriptionService.getAllSubscriptions().subscribe(e=>{this.subscriptionList=e.result,console.log(this.subscriptionList)})}deleteInstitute(e){this.subscriptionList.some(r=>r.institutionId._id===e._id)?x().fire({title:"This institution subscription is still valid",icon:"warning",showCancelButton:!0,confirmButtonText:"Proceed anyway",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed?x().fire({title:"Are you sure you want to delete?",text:"It will reflects on user and subscription",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel"}).then(l=>{l.isConfirmed&&this.performDelete(e)}):r.dismiss===x().DismissReason.cancel&&console.log("Cancel clicked")}):x().fire({title:"Are you sure you want to delete?",text:"It will reflects on user and subscription",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel"}).then(r=>{r.isConfirmed&&this.performDelete(e)})}performDelete(e){console.log(e),this.instituteService.deleteInstitution(e).subscribe(o=>{this.toastr.success(o.message,"",{timeOut:3e3}),this.getAllInstituteData()},o=>{this.toastr.error(o.error.message,"",{timeOut:3e3}),this.getAllInstituteData(),console.error("Delete failed",o)})}addCustomer(){}changeCustomerStatus(e){}editCustomer(e){}deleteCustomer(e){}addSubscription(e){console.log(e),console.log("add subscriptions"),this.dialog.open(jt,{width:"600px",height:"80vh",data:e}).afterClosed().subscribe(r=>{console.log(`Dialog result: ${r}`),this.getAllInstituteData(),this.getAllDataOfSubscription()})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(s.qu),t.Y36(Z.F0),t.Y36(O._W),t.Y36(p.uw),t.Y36(y),t.Y36(A))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-institution"]],viewQuery:function(e,o){if(1&e&&(t.Gf(C.NW,5),t.Gf(g.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:34,vars:7,consts:[[1,"institution-container"],[1,"main"],[1,"data-area"],[1,"data"],[1,"control"],[1,"button"],["placeholder","Search here",3,"keyup"],["mat-raised-button","",3,"click"],[1,"table"],["matSort","","matPaginator","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-sort-header","","id","first-header",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","email"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","city"],["matColumnDef","status"],["matColumnDef","action"],["matColumnDef","add"],["mat-sort-header","","id","last-header",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[3,"odd-row","even-row",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","pageIndex"],["mat-sort-header","","id","first-header"],[3,"ngClass"],["mat-sort-header",""],["color","primary",1,"example-margin",3,"checked"],[3,"click"],["mat-sort-header","","id","last-header"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),t._uU(6,"Institution Master"),t.qZA(),t.TgZ(7,"div",5)(8,"input",6),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.addData()}),t._uU(10," Add Institution "),t.qZA()()(),t.TgZ(11,"div",8)(12,"mat-table",9),t.ynx(13,10),t.YNc(14,zt,2,0,"mat-header-cell",11),t.YNc(15,Lt,2,2,"mat-cell",12),t.BQk(),t.ynx(16,13),t.YNc(17,Ht,2,0,"mat-header-cell",14),t.YNc(18,$t,2,2,"mat-cell",12),t.BQk(),t.ynx(19,15),t.YNc(20,Gt,2,0,"mat-header-cell",14),t.YNc(21,Kt,2,2,"mat-cell",12),t.BQk(),t.ynx(22,16),t.YNc(23,Vt,2,0,"mat-header-cell",14),t.YNc(24,Wt,2,2,"mat-cell",12),t.BQk(),t.ynx(25,17),t.YNc(26,Xt,2,0,"mat-header-cell",14),t.YNc(27,te,5,1,"mat-cell",12),t.BQk(),t.ynx(28,18),t.YNc(29,ee,2,0,"mat-header-cell",19),t.YNc(30,ne,3,1,"mat-cell",12),t.BQk(),t.YNc(31,oe,1,0,"mat-header-row",20),t.YNc(32,ie,1,4,"mat-row",21),t.qZA(),t._UZ(33,"mat-paginator",22),t.qZA()()()()()),2&e&&(t.xp6(12),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,ae))("pageSize",5)("pageIndex",0))},dependencies:[_.mk,S.lW,D.Rr,M.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.YE,g.nU,C.NW],styles:[".institution-container[_ngcontent-%COMP%]{width:100%;height:85vh;display:flex;justify-content:center}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:80%;height:85vh}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:100%;height:auto}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:auto;height:auto}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;text-align:center}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#46b3eb;color:#fff}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   #remove[_ngcontent-%COMP%]{margin-left:20px}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100;height:auto;margin-top:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:transparent}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]{width:auto;height:auto;margin-top:15px}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);font-size:16px;font-weight:500;color:#fff}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   #first-header[_ngcontent-%COMP%]{border-top-left-radius:8px}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   #last-header[_ngcontent-%COMP%]{border-top-right-radius:8px}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fabf01}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .odd-row[_ngcontent-%COMP%]{background-color:#f5f5f5}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .even-row[_ngcontent-%COMP%]{background-color:#fff}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{z-index:1;box-shadow:0 0 10px #00000080;border-bottom-left-radius:8px;border-bottom-right-radius:8px}@media screen and (max-width: 425px){.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:100%}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:auto}.institution-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]})),i})();class F{constructor(){(0,a.Z)(this,"_id",void 0),(0,a.Z)(this,"topic",void 0),(0,a.Z)(this,"status",void 0),(0,a.Z)(this,"createdOn",void 0)}}var I=u(7874);let Y=(()=>{var n;class i{constructor(e){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"loginURL",f.N.localdomain+"topic/"),(0,a.Z)(this,"getAllTopicMaster",()=>this.http.get(this.loginURL+"getAll")),(0,a.Z)(this,"saveTopicMaster",o=>this.http.post(this.loginURL+"save",o)),this.http=e}updateTopicMaster(e){return this.http.put(this.loginURL+"update",e)}deleteTopicMaster(e){const o=(new v.LE).set("_id",e);return this.http.delete(this.loginURL+"delete",{params:o})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(v.eN))}),(0,a.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();function ce(n,i){1&n&&(t.TgZ(0,"div",13),t._uU(1,"Add Topic"),t.qZA())}function se(n,i){1&n&&(t.TgZ(0,"div",13),t._uU(1,"Edit Topic"),t.qZA())}function le(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Topic is required "),t.qZA())}let z=(()=>{var n;class i{constructor(e,o,r,l){(0,a.Z)(this,"topicMasterService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"topic",void 0),(0,a.Z)(this,"myForm",void 0),(0,a.Z)(this,"exampleForm",void 0),(0,a.Z)(this,"status1",void 0),(0,a.Z)(this,"saveButton",!0),(0,a.Z)(this,"decryptFirstName",void 0),(0,a.Z)(this,"secretKey",f.N.secretKey),this.topicMasterService=e,this.toastr=o,this.dialogRef=r,this.data=l,this.topic=new F,null===this.data?this.topic=new F:(this.topic._id=this.data._id,this.topic.topic=this.data.topic,this.topic.status=this.data.status,this.topic.createdOn=this.data.createdOn)}ngOnInit(){this.myForm=new s.cw({topic:new s.NI(this.data?.topic||"",[s.kI.required])});const e=localStorage.getItem("3");this.decryptFirstName=this.decryptText(e,this.secretKey)}saveCoreBoxMaster(){null===this.data?(this.topic.createdOn=this.decryptFirstName,this.topicMasterService.saveTopicMaster(this.topic).subscribe(e=>{this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)},e=>{this.toastr.error(e.error.message,"",{timeOut:3e3}),this.dialogRef.close(e)})):this.topicMasterService.updateTopicMaster(this.topic).subscribe(e=>{this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)},e=>{this.toastr.error(e.error.message,"",{timeOut:3e3}),this.dialogRef.close(e)})}onNoClick(){this.dialogRef.close()}decryptText(e,o){return I.AES.decrypt(e,o).toString(I.enc.Utf8)}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(Y),t.Y36(O._W),t.Y36(p.so),t.Y36(p.WI))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-topic-form"]],decls:17,vars:7,consts:[[1,"form_crud"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"form_wrap"],["class","form_heading",4,"ngIf"],[3,"formGroup"],["exampleForm","ngForm"],[1,"form-group","custom_group"],["for","topic"],["placeholder","Topic","formControlName","topic","name","topic","id","topic","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"error"],[4,"ngIf"],[1,"form_btns"],[3,"disabled","click"],[1,"form_heading"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-icon",1),t.NdJ("click",function(){return o.onNoClick()}),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,ce,2,0,"div",3),t.YNc(5,se,2,0,"div",3),t.TgZ(6,"form",4,5)(8,"div",6)(9,"label",7),t._uU(10,"Topic"),t.qZA(),t.TgZ(11,"input",8),t.NdJ("ngModelChange",function(l){return o.topic.topic=l}),t.qZA(),t.TgZ(12,"div",9),t.YNc(13,le,2,0,"mat-error",10),t.qZA()(),t.TgZ(14,"div",11)(15,"button",12),t.NdJ("click",function(){return o.saveCoreBoxMaster()}),t._uU(16),t.qZA()()()()()),2&e){const r=t.MAs(7);t.xp6(4),t.Q6J("ngIf",null===o.data),t.xp6(1),t.Q6J("ngIf",null!==o.data),t.xp6(1),t.Q6J("formGroup",o.myForm),t.xp6(5),t.Q6J("ngModel",o.topic.topic),t.xp6(2),t.Q6J("ngIf",o.myForm.controls.topic.hasError("required")&&o.myForm.touched),t.xp6(2),t.Q6J("disabled",!r.valid||!o.saveButton),t.xp6(1),t.hij(" ",o.topic&&o.topic._id?"Update":"Save"," ")}},dependencies:[_.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.TO,M.Hw],styles:[".form_crud[_ngcontent-%COMP%]{padding:40px;position:relative}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]{position:absolute;top:40px;transform:translateY(-50%);right:30px;cursor:pointer}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]:hover{color:#555}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   .form_heading[_ngcontent-%COMP%]{font-size:20px;color:#4b5056;font-weight:700;margin-bottom:10px;text-align:center}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:4px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]{margin-bottom:10px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-bottom:5px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]{width:100%}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.error[_ngcontent-%COMP%]{line-height:20px!important;height:20px!important;font-size:14px}"]})),i})();var J=u(2596);function de(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.clearFilter())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ue(n,i){1&n&&(t.TgZ(0,"th",23),t._uU(1,"TOPIC NAME"),t.qZA())}function pe(n,i){if(1&n&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Oqu(c.topic)}}function ge(n,i){1&n&&(t.TgZ(0,"th",23),t._uU(1,"STATUS"),t.qZA())}function _e(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"td",24)(1,"mat-slide-toggle",25),t.NdJ("change",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.changeRoleStatus(r))}),t.qZA()()}if(2&n){const c=i.$implicit;t.xp6(1),t.Q6J("checked",1==c.status)}}function me(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1,"ACTIONS"),t.qZA())}function he(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"td",24)(1,"mat-icon",27),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.updateCoreBoxMaster(r))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",28),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.deleteCoreBoxMaster(r._id))}),t._uU(4,"delete"),t.qZA()()}}function fe(n,i){1&n&&t._UZ(0,"tr",29)}function Ce(n,i){1&n&&t._UZ(0,"tr",30)}const Me=function(){return[10,25,100]};let Oe=(()=>{var n;class i{constructor(e,o,r){(0,a.Z)(this,"topicMasterService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"topic",void 0),(0,a.Z)(this,"TopicList",void 0),(0,a.Z)(this,"value",""),(0,a.Z)(this,"myForm",void 0),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"exampleForm",void 0),(0,a.Z)(this,"status1",void 0),(0,a.Z)(this,"saveButton",!0),(0,a.Z)(this,"decryptFirstName",void 0),(0,a.Z)(this,"secretKey",f.N.secretKey),(0,a.Z)(this,"displayedColumns",["topic","status","actions"]),(0,a.Z)(this,"paginator",void 0),(0,a.Z)(this,"sort",void 0),(0,a.Z)(this,"clearFilter",()=>{this.dataSource.filter="",this.value=""}),this.topicMasterService=e,this.toastr=o,this.dialog=r}ngOnInit(){this.topic=new F;const e=localStorage.getItem("3");this.decryptFirstName=this.decryptText(e,this.secretKey),this.getAllTopicMaster()}getAllTopicMaster(){this.topicMasterService.getAllTopicMaster().subscribe(e=>{this.TopicList=e.result,this.dataSource=new d.by(e.result),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}updateCoreBoxMaster(e){this.dialog.open(z,{width:"500px",margin:"0 auto",data:e}).afterClosed().subscribe(l=>{void 0!==l&&this.getAllTopicMaster()})}saveCoreBoxMaster(){this.dialog.open(z,{width:"500px",margin:"0 auto"}).afterClosed().subscribe(r=>{void 0!==r&&this.getAllTopicMaster()})}changeRoleStatus(e){}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}cancel(){this.myForm.reset({status:this.status1}),this.topic._id=void 0,this.saveButton=!0}decryptText(e,o){return I.AES.decrypt(e,o).toString(I.enc.Utf8)}deleteCoreBoxMaster(e){x().fire({title:"Delete",text:"Are you sure you want to Delete?",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&this.topicMasterService.deleteTopicMaster(e).subscribe(r=>{this.toastr.success(r.message,"",{timeOut:3e3}),this.getAllTopicMaster()},r=>{this.toastr.error(r.error.message,"",{timeOut:3e3}),this.getAllTopicMaster()})})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(Y),t.Y36(O._W),t.Y36(p.uw))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-topic"]],viewQuery:function(e,o){if(1&e&&(t.Gf(C.NW,5),t.Gf(g.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:27,vars:6,consts:[[1,"topic_container"],[1,"h2","mb-5","text-center"],["id","table",1,"topic_table_container"],[1,"search_and_add"],[1,"search_box"],[1,"search_field"],["placeholder","Search Topic",1,"form-control",3,"keyup"],["input",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"add_btn"],[3,"click"],[1,"mat-elevation-z8","table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","topic"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["color","primary",1,"example-margin",3,"checked","change"],["mat-header-cell",""],["matTooltip","Edit",1,"set_edit_color_button",3,"click"],["matTooltip","Delete",1,"set_edit_color_button","ms-2",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Topic Master"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6,7),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()(),t.YNc(9,de,3,0,"button",8),t.qZA(),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return o.saveCoreBoxMaster()}),t._uU(12,"Add Topic"),t.qZA()()(),t.TgZ(13,"div",11)(14,"table",12),t.ynx(15,13),t.YNc(16,ue,2,0,"th",14),t.YNc(17,pe,2,1,"td",15),t.BQk(),t.ynx(18,16),t.YNc(19,ge,2,0,"th",14),t.YNc(20,_e,2,1,"td",15),t.BQk(),t.ynx(21,17),t.YNc(22,me,2,0,"th",18),t.YNc(23,he,5,0,"td",15),t.BQk(),t.YNc(24,fe,1,0,"tr",19),t.YNc(25,Ce,1,0,"tr",20),t.qZA(),t._UZ(26,"mat-paginator",21),t.qZA()()()),2&e&&(t.xp6(9),t.Q6J("ngIf",o.value),t.xp6(5),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,Me)))},dependencies:[_.O5,S.lW,S.RK,T.R9,D.Rr,M.Hw,J.gM,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.YE,g.nU,C.NW],styles:["#previousButton[_ngcontent-%COMP%]{left:1px;bottom:35px;float:left;position:fixed}#nextButton[_ngcontent-%COMP%]{right:18px;bottom:35px;float:right;position:fixed}.topic_container[_ngcontent-%COMP%]{padding:20px}.example-card2[_ngcontent-%COMP%]{border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;background-color:#2f4f4f;margin-top:-30px;margin-left:-10px;padding:1px;height:35px}.topic_table_container[_ngcontent-%COMP%]{width:80%;margin:0 auto}.topic_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.topic_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.topic_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.topic_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);padding:8px 16px;border:none;color:#fff;font-weight:600;border-radius:4px;transition:background-color .3s ease}.topic_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:8px;box-shadow:0 4px 8px #0000001a}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-radius:8px}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{border-radius:8px 8px 0 0}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);font-size:16px;font-weight:500;color:#fff}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 8px 0 0}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]{border-radius:0 0 8px 8px;width:100%!important;margin-top:20px;display:flex;justify-content:flex-end;align-items:center}.topic_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{font-size:14px}.set_edit_color_button[_ngcontent-%COMP%]{color:var(--qgen-logo-yellow);cursor:pointer}.set_edit_color_button[_ngcontent-%COMP%]:hover{color:#ffd43b}@media (max-width: 992px){.topic_table_container[_ngcontent-%COMP%]{width:80%}}@media (max-width: 768px){.topic_table_container[_ngcontent-%COMP%]{width:90%}}"]})),i})();class L{constructor(){(0,a.Z)(this,"_id",void 0),(0,a.Z)(this,"role",void 0),(0,a.Z)(this,"status",void 0),(0,a.Z)(this,"isDeleted",void 0),(0,a.Z)(this,"createdOn",void 0),(0,a.Z)(this,"modifiedOn",void 0),(0,a.Z)(this,"createdAt",void 0),(0,a.Z)(this,"modifiedAt",void 0)}}let R=(()=>{var n;class i{constructor(e){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"roleUrl",f.N.localdomain+"role"),this.http=e}getToken(){return localStorage.getItem("1")}getRole(){return this.http.get(`${this.roleUrl}/getAll`)}saveRole(e){return this.http.post(`${this.roleUrl}/save`,{role:e})}editRole(e){return this.http.put(`${this.roleUrl}/update`,e)}deleteRole(e){const o=(new v.LE).set("_id",e);return this.http.delete(`${this.roleUrl}/delete`,{params:o})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(v.eN))}),(0,a.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();function Pe(n,i){1&n&&(t.TgZ(0,"div",12),t._uU(1,"Add Role"),t.qZA())}function be(n,i){1&n&&(t.TgZ(0,"div",12),t._uU(1,"Edit Role"),t.qZA())}function xe(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Role is reqiured"),t.qZA())}function Ze(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.saveRole())}),t._uU(1," Save "),t.qZA()}if(2&n){const c=t.oxw();t.Q6J("disabled",c.RoleForm.invalid)}}function ve(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.editRole())}),t._uU(1," Update "),t.qZA()}if(2&n){const c=t.oxw();t.Q6J("disabled",c.RoleForm.invalid)}}let H=(()=>{var n;class i{constructor(e,o,r,l){(0,a.Z)(this,"roleService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"RoleForm",void 0),(0,a.Z)(this,"roles",void 0),this.roleService=e,this.toastr=o,this.dialogRef=r,this.data=l,this.RoleForm=new s.cw({_id:new s.NI(l?._id||""),role:new s.NI(l?.role||"",s.kI.required)})}ngOnInit(){this.roles=new L,null===this.data?this.roles=new L:(this.roles.role=this.data.role,this.roles._id=this.data._id,this.roles.createdAt=this.data.createdAt,this.roles.createdOn=this.data.createdOn,this.roles.modifiedAt=this.data.modifiedAt,this.roles.modifiedOn=this.data.modifiedOn,this.roles.isDeleted=this.data.isDeleted,this.roles.status=this.data.status)}saveRole(){const e=this.roles.role.toUpperCase();this.roleService.saveRole(e).subscribe(o=>{this.RoleForm.reset(),this.toastr.success(o.message,"",{timeOut:3e3}),this.dialogRef.close(o)},o=>{this.toastr.error(o.message,"",{timeOut:3e3}),this.dialogRef.close(o)})}editRole(){this.roleService.editRole(this.roles).subscribe(e=>{this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)},e=>{this.toastr.error(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)})}onNoClick(){this.dialogRef.close()}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(R),t.Y36(O._W),t.Y36(p.so),t.Y36(p.WI))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-role-form"]],decls:16,vars:8,consts:[[1,"form_crud"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"form_wrap"],["class","form_heading",4,"ngIf"],[3,"formGroup"],[1,"form-group","custom_group"],["for","role"],["type","text","id","role","formControlName","role",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"error"],[4,"ngIf"],[1,"form_btns"],["class","",3,"disabled","click",4,"ngIf"],[1,"form_heading"],[1,"",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-icon",1),t.NdJ("click",function(){return o.onNoClick()}),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,Pe,2,0,"div",3),t.YNc(5,be,2,0,"div",3),t.TgZ(6,"form",4)(7,"div",5)(8,"label",6),t._uU(9,"Role"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("ngModelChange",function(l){return o.roles.role=l}),t.qZA(),t.TgZ(11,"div",8),t.YNc(12,xe,2,0,"mat-error",9),t.qZA()(),t.TgZ(13,"div",10),t.YNc(14,Ze,2,1,"button",11),t.YNc(15,ve,2,1,"button",11),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",null===o.data),t.xp6(1),t.Q6J("ngIf",null!==o.data),t.xp6(1),t.Q6J("formGroup",o.RoleForm),t.xp6(4),t.s9C("placeholder",null!==o.data?"Edit Role":"Add Role"),t.Q6J("ngModel",o.roles.role),t.xp6(2),t.Q6J("ngIf",o.RoleForm.controls.role.hasError("required")&&o.RoleForm.touched),t.xp6(2),t.Q6J("ngIf",null===o.data),t.xp6(1),t.Q6J("ngIf",null!==o.data))},dependencies:[_.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.TO,M.Hw],styles:[".form_crud[_ngcontent-%COMP%]{padding:40px;position:relative}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]{position:absolute;top:30px;transform:translateY(-50%);right:25px;cursor:pointer}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]:hover{color:#555}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   .form_heading[_ngcontent-%COMP%]{font-size:20px;color:#4b5056;font-weight:700;margin-bottom:10px;text-align:center}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:4px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]{margin-bottom:10px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-bottom:5px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{line-height:20px!important;height:20px!important;font-size:14px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]{width:100%}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}"]})),i})();function Te(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1,"SNO"),t.qZA())}function we(n,i){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const c=i.index;t.xp6(1),t.Oqu(c+1)}}function ke(n,i){1&n&&(t.TgZ(0,"th",23),t._uU(1,"ROLE"),t.qZA())}function ye(n,i){if(1&n&&(t.TgZ(0,"td",22)(1,"div",24),t._uU(2),t.qZA()()),2&n){const c=i.$implicit;t.xp6(2),t.Oqu(c.role)}}function Ae(n,i){1&n&&t._UZ(0,"tr",25)}function Se(n,i){1&n&&t._UZ(0,"tr",26)}const Ne=function(){return[5,10,20]};let Ue=(()=>{var n;class i{constructor(e,o,r){(0,a.Z)(this,"roleService",void 0),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"paginator",void 0),(0,a.Z)(this,"sort",void 0),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"displayedColumns",["sno","role"]),this.roleService=e,this.dialog=o,this.toastr=r}ngOnInit(){this.getRole()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}getRole(){this.roleService.getRole().subscribe(e=>{this.dataSource=new d.by(e.result),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e=>{this.toastr.error(e.message,"",{timeOut:3e3})})}addRole(){this.dialog.open(H,{width:"500px",margin:"0 auto"}).afterClosed().subscribe(r=>{void 0!==r&&this.getRole()})}editRole(e){this.dialog.open(H,{width:"500px",margin:"0 auto",data:e}).afterClosed().subscribe(l=>{void 0!==l&&this.getRole()})}deleteRole(e){x().fire({title:"Delete",text:"Are you sure you want to Delete?",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&this.roleService.deleteRole(e._id).subscribe(r=>{this.toastr.success(r.message,"",{timeOut:3e3}),this.getRole()},r=>{this.toastr.error(r.message,"",{timeOut:3e3}),this.getRole()})})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(R),t.Y36(p.uw),t.Y36(O._W))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-role"]],viewQuery:function(e,o){if(1&e&&(t.Gf(C.NW,5),t.Gf(g.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:24,vars:8,consts:[[1,"role_container"],[1,"h2","mb-5","text-center"],[1,"role_table_container"],[1,"search_and_add"],[1,"search_box"],[1,"search_field"],["placeholder","Search Role",1,"form-control",3,"keyup"],["input",""],[1,"add_btn"],[1,"",3,"click"],[1,"table-container","mat-elevation-z8"],["mat-table","","matSort","","aria-label","Complaints Table",1,"complaint-table",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"description-cell"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Role Master"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6,7),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return o.addRole()}),t._uU(11,"Add Role"),t.qZA()()(),t.TgZ(12,"div",10)(13,"table",11),t.ynx(14,12),t.YNc(15,Te,2,0,"th",13),t.YNc(16,we,2,1,"td",14),t.BQk(),t.ynx(17,15),t.YNc(18,ke,2,0,"th",16),t.YNc(19,ye,3,1,"td",14),t.BQk(),t.YNc(20,Ae,1,0,"tr",17),t.YNc(21,Se,1,0,"tr",18),t.qZA(),t._UZ(22,"mat-paginator",19,20),t.qZA()()()),2&e&&(t.xp6(13),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",null==o.dataSource||null==o.dataSource.data?null:o.dataSource.data.length)("pageIndex",0)("pageSize",5)("pageSizeOptions",t.DdM(7,Ne)))},dependencies:[d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.YE,g.nU,C.NW],styles:[".role_container[_ngcontent-%COMP%]{padding:20px}.role_table_container[_ngcontent-%COMP%]{width:80%;margin:0 auto}.role_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.role_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.role_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.role_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);padding:8px 16px;border:none;color:#fff;font-weight:600;border-radius:4px;transition:background-color .3s ease}.role_table_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #ccc;border-radius:8px;box-shadow:0 4px 8px #0000001a}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-radius:8px}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{border-radius:8px 8px 0 0}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);font-size:16px;font-weight:500;color:#fff}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 8px 0 0}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]{border-radius:0 0 8px 8px;width:100%!important;margin-top:20px;display:flex;justify-content:flex-end;align-items:center}.role_table_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{font-size:14px}.set_edit_color_button[_ngcontent-%COMP%]{color:var(--qgen-logo-yellow);cursor:pointer}.set_edit_color_button[_ngcontent-%COMP%]:hover{color:#ffd43b}@media (max-width: 768px){.role_table_container[_ngcontent-%COMP%]{width:90%}}"]})),i})();class Ie{constructor(){(0,a.Z)(this,"_id",void 0),(0,a.Z)(this,"firstName",void 0),(0,a.Z)(this,"lastName",void 0),(0,a.Z)(this,"email",void 0),(0,a.Z)(this,"password",void 0),(0,a.Z)(this,"role",void 0),(0,a.Z)(this,"institutionId",void 0),(0,a.Z)(this,"subscriptionId",void 0),(0,a.Z)(this,"topicId",void 0),(0,a.Z)(this,"createdBy",void 0),(0,a.Z)(this,"createdOn",void 0)}}const qe=n=>{const i=n.get("password"),c=n.get("confirmPassword");return i&&c&&i.value!==c.value?{passwordMismatch:!0}:null};let $=(()=>{var n;class i{constructor(e){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"userUrl",f.N.localdomain+"user/"),this.http=e}getAllUserMaster(){return this.http.get(this.userUrl+"getAll")}saveUserMaster(e){return this.http.post(this.userUrl+"save",e)}updateUserMaster(e){return this.http.put(this.userUrl+"update",e)}deleteUserMaster(e){const o=(new v.LE).set("_id",e);return this.http.delete(this.userUrl+"delete",{params:o})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(v.eN))}),(0,a.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();function De(n,i){1&n&&(t.TgZ(0,"div",25),t._uU(1,"Add User"),t.qZA())}function Fe(n,i){1&n&&(t.TgZ(0,"div",25),t._uU(1,"Edit User"),t.qZA())}function Ye(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"first name is required"),t.qZA())}function Je(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"first name must be at least 3 characters long "),t.qZA())}function Re(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"first name cannot exceed 20 characters "),t.qZA())}function Qe(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"last name is required"),t.qZA())}function Ee(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"last name must be at least 3 characters long "),t.qZA())}function Be(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"last name cannot exceed 20 characters "),t.qZA())}function je(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"email is required"),t.qZA())}function ze(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Enter valid email address"),t.qZA())}function Le(n,i){if(1&n&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("value",c._id),t.xp6(1),t.hij(" ",c.role," ")}}function He(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Role is required"),t.qZA())}function $e(n,i){if(1&n&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("value",c._id),t.xp6(1),t.hij(" ",c.name," ")}}function Ge(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Institution is required"),t.qZA())}function Ke(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"label",27),t._uU(3,"Institution"),t.qZA(),t.TgZ(4,"select",28),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.userObject.institutionId=o)}),t.TgZ(5,"option",18),t._uU(6,"select Institution"),t.qZA(),t.YNc(7,$e,2,2,"option",19),t.qZA(),t.TgZ(8,"div",10),t.YNc(9,Ge,2,0,"mat-error",11),t.qZA()()()}if(2&n){const c=t.oxw();t.xp6(4),t.Q6J("ngModel",c.userObject.institutionId),t.xp6(3),t.Q6J("ngForOf",c.intitutions),t.xp6(2),t.Q6J("ngIf",c.userForm.controls.institutionId.hasError("required")&&c.userForm.controls.institutionId.touched)}}function Ve(n,i){if(1&n&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("value",c._id),t.xp6(1),t.hij(" ",c.topic," ")}}function We(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Topic is required"),t.qZA())}function Xe(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"label",29),t._uU(3,"Topic"),t.qZA(),t.TgZ(4,"select",30),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.userObject.topicId=o)}),t.YNc(5,Ve,2,2,"option",19),t.qZA(),t.TgZ(6,"div",10),t.YNc(7,We,2,0,"mat-error",11),t.qZA()()()}if(2&n){const c=t.oxw();t.Udp("width","FACULTY"!==c.selectedRole?"100%":""),t.xp6(4),t.Q6J("ngModel",c.userObject.topicId),t.xp6(1),t.Q6J("ngForOf",c.topics),t.xp6(2),t.Q6J("ngIf",c.userForm.controls.topicId.hasError("required")&&c.userForm.controls.topicId.touched)}}function tn(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"password is required"),t.qZA())}function en(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Password must contain 8 to 16 characters"),t.qZA())}function nn(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Password does not match"),t.qZA())}function on(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"label",31),t._uU(4,"Password"),t.qZA(),t.TgZ(5,"input",32),t.NdJ("ngModelChange",function(o){t.CHM(c);const r=t.oxw();return t.KtG(r.userObject.password=o)}),t.qZA(),t.TgZ(6,"div",10),t.YNc(7,tn,2,0,"mat-error",11),t.YNc(8,en,2,0,"mat-error",11),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"label",33),t._uU(12,"Confirm password"),t.qZA(),t._UZ(13,"input",34),t.TgZ(14,"div",10),t.YNc(15,nn,2,0,"mat-error",11),t.qZA()()()()}if(2&n){const c=t.oxw();t.xp6(5),t.Q6J("ngModel",c.userObject.password),t.xp6(2),t.Q6J("ngIf",c.userForm.controls.password.hasError("required")&&c.userForm.controls.password.touched),t.xp6(1),t.Q6J("ngIf",c.userForm.controls.password.hasError("pattern")),t.xp6(7),t.Q6J("ngIf",c.userForm.hasError("passwordMismatch")&&c.userForm.get("confirmPassword").touched)}}function an(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.saveUserMaster())}),t._uU(1," Save "),t.qZA()}if(2&n){const c=t.oxw();t.Q6J("disabled",c.userForm.invalid)}}function rn(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(c);const o=t.oxw();return t.KtG(o.updateUserMaster())}),t._uU(1," Update "),t.qZA()}if(2&n){const c=t.oxw();t.Q6J("disabled",c.userForm.invalid||!c.isFormValueChanged)}}let G=(()=>{var n;class i{constructor(e,o,r,l,m,P,h){(0,a.Z)(this,"userService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"institutionService",void 0),(0,a.Z)(this,"roleService",void 0),(0,a.Z)(this,"topicService",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"userForm",void 0),(0,a.Z)(this,"userObject",{firstName:"",lastName:"",email:"",password:"",role:void 0,institutionId:void 0,subscriptionId:void 0,topicId:void 0}),(0,a.Z)(this,"initialFormValues",void 0),(0,a.Z)(this,"isFormValueChanged",!1),(0,a.Z)(this,"roles",[]),(0,a.Z)(this,"topics",[]),(0,a.Z)(this,"intitutions",[]),(0,a.Z)(this,"passwordVisible",!0),(0,a.Z)(this,"selectedRole",""),(0,a.Z)(this,"showTopic",!0),this.userService=e,this.toastr=o,this.institutionService=r,this.roleService=l,this.topicService=m,this.dialogRef=P,this.data=h,this.userForm=new s.cw({firstName:new s.NI(this.data?.firstName||"",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(20)]),lastName:new s.NI(this.data?.lastName||"",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(20)]),email:new s.NI(this.data?.email||"",[s.kI.required,s.kI.email]),role:new s.NI(this.data?.role?._id||"",s.kI.required),institutionId:new s.NI(this.data?.institutionId?._id||"",s.kI.required),topicId:new s.NI(this.data?.topicId?._id||"",s.kI.required),password:new s.NI("",[s.kI.required,s.kI.pattern("^[A-Za-z0-9@$!%*#?&]{8,16}")]),confirmPassword:new s.NI("",s.kI.required)},{validators:qe})}ngOnInit(){this.userObject=new Ie,this.getInstitution(),this.getRole(),this.getTopic(),null!==this.data&&(this.userObject._id=this.data._id,this.userObject.createdBy=this.data.createdBy,this.userObject.createdOn=this.data.createdOn,this.userObject.email=this.data.email,this.userObject.firstName=this.data.firstName,this.userObject.lastName=this.data.lastName,this.userObject.password=this.data.password,this.userObject.role=this.data.role._id,this.userObject.topicId=this.data?.topicId?._id,this.userObject.institutionId=this.data?.institutionId?._id,this.passwordVisible=!1,this.userForm.get("password").disable(),this.userForm.get("confirmPassword").disable(),this.selectedRole=this.data.role.role,this.initialFormValues=this.userForm.value,("ADMIN"===this.data.role.role||"STUDENT"===this.data.role.role)&&(this.userForm.get("topicId").disable(),this.showTopic=!1)),this.userForm.get("role").valueChanges.subscribe(e=>{const o=this.roles.find(r=>r._id===e);void 0===o&&null!==this.data&&"FACULTY"===this.selectedRole||(void 0!==o&&"FACULTY"===o?.role?(this.selectedRole=o?.role,this.userForm.get("institutionId").enable()):(this.selectedRole="",this.userForm.get("institutionId").disable(),this.userObject.institutionId=void 0)),void 0===o&&null!==this.data&&"ADMIN"===this.data.role.role||void 0===o&&null!==this.data&&"STUDENT"===this.data.role.role||("ADMIN"===o?.role||"STUDENT"===o?.role?(this.userForm.get("topicId").disable(),this.showTopic=!1,this.userObject.topicId=void 0):(this.userForm.get("topicId").enable(),this.showTopic=!0))}),this.userForm.valueChanges.subscribe(()=>{this.isFormValueChanged=!this.areFormValuesEqual(this.initialFormValues,this.userForm.value)})}areFormValuesEqual(e,o){return JSON.stringify(e)===JSON.stringify(o)}saveUserMaster(){this.userService.saveUserMaster(this.userObject).subscribe(e=>{this.userForm.reset(),this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)},e=>{this.toastr.error(e.error.message,"",{timeOut:3e3})})}updateUserMaster(){this.userService.updateUserMaster(this.userObject).subscribe(e=>{this.userForm.reset(),this.toastr.success(e.message,"",{timeOut:3e3}),this.dialogRef.close(e)},e=>{this.toastr.error(e.error.message,"",{timeOut:3e3})})}getRole(){this.roleService.getRole().subscribe(e=>{this.roles=e.result})}getTopic(){this.topicService.getAllTopicMaster().subscribe(e=>{this.topics=e.result})}getInstitution(){this.institutionService.getAllInstitute().subscribe(e=>{this.intitutions=e.result})}onNoClick(){this.dialogRef.close()}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36($),t.Y36(O._W),t.Y36(y),t.Y36(R),t.Y36(Y),t.Y36(p.so),t.Y36(p.WI))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-user-form"]],decls:52,vars:22,consts:[[1,"form_crud"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"form_wrap"],["class","form_heading",4,"ngIf"],[3,"formGroup"],[1,"flex_group"],[1,"col_group"],[1,"form-group","custom_group"],["for","firstName"],["type","text","id","firstName","name","firstName","formControlName","firstName",1,"form-control",3,"ngModel","ngModelChange"],[1,"error"],[4,"ngIf"],["for","lastName"],["type","text","id","lastName","name","lastName","formControlName","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","formControlName","email",1,"form-control",3,"ngModel","ngModelChange"],["for","role"],["id","role","aria-label","Default select example","name","role","formControlName","role",1,"form-select",3,"ngModel","ngModelChange"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","col_group",4,"ngIf"],["class","col_group",3,"width",4,"ngIf"],["class","flex_group",4,"ngIf"],[1,"form_btns"],["class","",3,"disabled","click",4,"ngIf"],[1,"form_heading"],[3,"value"],["for","institution"],["id","institution","aria-label","Default select example","name","institutionId","formControlName","institutionId",1,"form-select",3,"ngModel","ngModelChange"],["for","topic"],["id","topic","aria-label","Default select example","name","topicId","formControlName","topicId","placehoder","select",1,"form-select",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","formControlName","password",1,"form-control",3,"ngModel","ngModelChange"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","formControlName","confirmPassword",1,"form-control"],[1,"",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-icon",1),t.NdJ("click",function(){return o.onNoClick()}),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,De,2,0,"div",3),t.YNc(5,Fe,2,0,"div",3),t.TgZ(6,"form",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),t._uU(11,"First name"),t.qZA(),t.TgZ(12,"input",9),t.NdJ("ngModelChange",function(l){return o.userObject.firstName=l}),t.qZA(),t.TgZ(13,"div",10),t.YNc(14,Ye,2,0,"mat-error",11),t.YNc(15,Je,2,0,"mat-error",11),t.YNc(16,Re,2,0,"mat-error",11),t.qZA()()(),t.TgZ(17,"div",6)(18,"div",7)(19,"label",12),t._uU(20,"Last name"),t.qZA(),t.TgZ(21,"input",13),t.NdJ("ngModelChange",function(l){return o.userObject.lastName=l}),t.qZA(),t.TgZ(22,"div",10),t.YNc(23,Qe,2,0,"mat-error",11),t.YNc(24,Ee,2,0,"mat-error",11),t.YNc(25,Be,2,0,"mat-error",11),t.qZA()()()(),t.TgZ(26,"div",5)(27,"div",6)(28,"div",7)(29,"label",14),t._uU(30,"Email"),t.qZA(),t.TgZ(31,"input",15),t.NdJ("ngModelChange",function(l){return o.userObject.email=l}),t.qZA(),t.TgZ(32,"div",10),t.YNc(33,je,2,0,"mat-error",11),t.YNc(34,ze,2,0,"mat-error",11),t.qZA()()(),t.TgZ(35,"div",6)(36,"div",7)(37,"label",16),t._uU(38,"Role"),t.qZA(),t.TgZ(39,"select",17),t.NdJ("ngModelChange",function(l){return o.userObject.role=l}),t.TgZ(40,"option",18),t._uU(41,"select role"),t.qZA(),t.YNc(42,Le,2,2,"option",19),t.qZA(),t.TgZ(43,"div",10),t.YNc(44,He,2,0,"mat-error",11),t.qZA()()()(),t.TgZ(45,"div",5),t.YNc(46,Ke,10,3,"div",20),t.YNc(47,Xe,8,5,"div",21),t.qZA(),t.YNc(48,on,16,4,"div",22),t.TgZ(49,"div",23),t.YNc(50,an,2,1,"button",24),t.YNc(51,rn,2,1,"button",24),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",null===o.data),t.xp6(1),t.Q6J("ngIf",null!==o.data),t.xp6(1),t.Q6J("formGroup",o.userForm),t.xp6(6),t.Q6J("ngModel",o.userObject.firstName),t.xp6(2),t.Q6J("ngIf",o.userForm.controls.firstName.hasError("required")&&o.userForm.get("firstName").touched),t.xp6(1),t.Q6J("ngIf",o.userForm.controls.firstName.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",o.userForm.controls.firstName.hasError("maxlength")),t.xp6(5),t.Q6J("ngModel",o.userObject.lastName),t.xp6(2),t.Q6J("ngIf",o.userForm.controls.lastName.hasError("required")&&o.userForm.controls.lastName.touched),t.xp6(1),t.Q6J("ngIf",o.userForm.controls.lastName.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",o.userForm.controls.lastName.hasError("maxlength")),t.xp6(6),t.Q6J("ngModel",o.userObject.email),t.xp6(2),t.Q6J("ngIf",o.userForm.controls.email.hasError("required")&&o.userForm.controls.email.touched),t.xp6(1),t.Q6J("ngIf",o.userForm.controls.email.hasError("email")),t.xp6(5),t.Q6J("ngModel",o.userObject.role),t.xp6(3),t.Q6J("ngForOf",o.roles),t.xp6(2),t.Q6J("ngIf",o.userForm.controls.role.hasError("required")&&o.userForm.controls.role.touched),t.xp6(2),t.Q6J("ngIf","FACULTY"===o.selectedRole),t.xp6(1),t.Q6J("ngIf",o.showTopic),t.xp6(1),t.Q6J("ngIf",o.passwordVisible),t.xp6(2),t.Q6J("ngIf",null===o.data),t.xp6(1),t.Q6J("ngIf",null!==o.data))},dependencies:[_.sg,_.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,T.TO,M.Hw],styles:[".form_crud[_ngcontent-%COMP%]{padding:40px;position:relative;max-height:80vh}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]{position:absolute;top:30px;transform:translateY(-50%);right:25px;cursor:pointer}.form_crud[_ngcontent-%COMP%]   .close_btn[_ngcontent-%COMP%]:hover{color:#555}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]{padding-bottom:20px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   .form_heading[_ngcontent-%COMP%]{font-size:20px;color:#4b5056;font-weight:700;margin-bottom:10px;text-align:center}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px;border:1px solid #ccc;border-radius:4px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_group[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_group[_ngcontent-%COMP%]   .col_group[_ngcontent-%COMP%]{width:48%}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]{margin-bottom:10px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-bottom:5px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .custom_group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{line-height:20px!important;min-height:20px!important;font-size:14px}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]{width:100%}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}@media (max-width: 768px){.form_crud[_ngcontent-%COMP%]   .form_wrap[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .flex_group[_ngcontent-%COMP%]   .col_group[_ngcontent-%COMP%]{width:100%}}"]})),i})();function cn(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1,"SNO"),t.qZA())}function sn(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const c=i.index;t.xp6(1),t.Oqu(c+1)}}function ln(n,i){1&n&&(t.TgZ(0,"th",28),t._uU(1,"NAME"),t.qZA())}function dn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",29),t._uU(2),t.qZA()()),2&n){const c=i.$implicit;t.xp6(2),t.AsE(" ",c.firstName," ",c.lastName," ")}}function un(n,i){1&n&&(t.TgZ(0,"th",28),t._uU(1,"EMAIL"),t.qZA())}function pn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",29),t._uU(2),t.qZA()()),2&n){const c=i.$implicit;t.xp6(2),t.Oqu(c.email)}}function gn(n,i){1&n&&(t.TgZ(0,"th",28),t._uU(1,"ROLE"),t.qZA())}function _n(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",29),t._uU(2),t.qZA()()),2&n){const c=i.$implicit;t.xp6(2),t.Oqu(null==c||null==c.role?null:c.role.role)}}function mn(n,i){1&n&&(t.TgZ(0,"th",28),t._uU(1,"INSTITUTION"),t.qZA())}function hn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",29),t._uU(2),t.qZA()()),2&n){const c=i.$implicit;t.xp6(2),t.Oqu(null==c||null==c.institutionId?null:c.institutionId.name)}}function fn(n,i){1&n&&(t.TgZ(0,"th",28),t._uU(1,"TOPIC"),t.qZA())}function Cn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",29),t._uU(2),t.qZA()()),2&n){const c=i.$implicit;t.xp6(2),t.Oqu(null==c||null==c.topicId?null:c.topicId.topic)}}function Mn(n,i){1&n&&(t.TgZ(0,"th",28),t._uU(1,"ACTION"),t.qZA())}function On(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(c);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateUserMaster(o))}),t._uU(1,"edit"),t.qZA()}}function Pn(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(c);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.deleteUserMaster(o._id))}),t._uU(1,"delete"),t.qZA()}}function bn(n,i){if(1&n&&(t.TgZ(0,"td",27),t.YNc(1,On,2,0,"mat-icon",30),t.YNc(2,Pn,2,0,"mat-icon",31),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.Q6J("ngIf","ADMIN"!==c.role.role),t.xp6(1),t.Q6J("ngIf","ADMIN"!==c.role.role)}}function xn(n,i){1&n&&t._UZ(0,"tr",34)}function Zn(n,i){1&n&&t._UZ(0,"tr",35)}const vn=function(){return[5,10,20]};let Tn=(()=>{var n;class i{constructor(e,o,r){(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"userService",void 0),(0,a.Z)(this,"userList",void 0),(0,a.Z)(this,"paginator",void 0),(0,a.Z)(this,"sort",void 0),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"displayedColumns",["sno","name","email","role","institution","topic","actions"]),this.toastr=e,this.dialog=o,this.userService=r}ngOnInit(){this.getAllUserMaster()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}getAllUserMaster(){this.userService.getAllUserMaster().subscribe(e=>{this.userList=e.result,this.dataSource=new d.by(e.result),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e=>{this.toastr.error(e.message,"",{timeOut:3e3})})}saveUserMaster(){this.dialog.open(G,{width:"600px",margin:"0 auto",overflow:"auto"}).afterClosed().subscribe(r=>{void 0!==r&&this.getAllUserMaster()})}updateUserMaster(e){this.dialog.open(G,{width:"600px",margin:"0 auto",data:e,overflow:"auto"}).afterClosed().subscribe(l=>{void 0!==l&&this.getAllUserMaster()})}deleteUserMaster(e){x().fire({title:"Delete",text:"Are you sure you want to Delete?",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&this.userService.deleteUserMaster(e).subscribe(r=>{this.toastr.success(r.message,"",{timeOut:3e3}),this.getAllUserMaster()},r=>{this.toastr.error(r.error.message,"",{timeOut:3e3}),this.getAllUserMaster()})})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(O._W),t.Y36(p.uw),t.Y36($))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-user"]],viewQuery:function(e,o){if(1&e&&(t.Gf(C.NW,5),t.Gf(g.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:39,vars:8,consts:[[1,"user_container_wrapper"],[1,"h2","mb-5","text-center"],[1,"user_container"],[1,"search_and_add"],[1,"search_box"],[1,"search_field"],["placeholder","Search User",1,"form-control",3,"keyup"],["input",""],[1,"add_btn"],[1,"",3,"click"],[1,"table-container","mat-elevation-z8",2,"overflow","auto"],["mat-table","","matSort","","aria-label","Complaints Table",1,"full-width-table",3,"dataSource"],["matColumnDef","sno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","institution"],["matColumnDef","topic"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"description-cell"],["class","set_edit_color_button","matTooltip","edit",3,"click",4,"ngIf"],["class","set_edit_color_button ms-2","matTooltip","delete",3,"click",4,"ngIf"],["matTooltip","edit",1,"set_edit_color_button",3,"click"],["matTooltip","delete",1,"set_edit_color_button","ms-2",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"User Master"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6,7),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return o.saveUserMaster()}),t._uU(11,"Add User"),t.qZA()()(),t.TgZ(12,"div",10)(13,"table",11),t.ynx(14,12),t.YNc(15,cn,2,0,"th",13),t.YNc(16,sn,2,1,"td",14),t.BQk(),t.ynx(17,15),t.YNc(18,ln,2,0,"th",16),t.YNc(19,dn,3,2,"td",14),t.BQk(),t.ynx(20,17),t.YNc(21,un,2,0,"th",16),t.YNc(22,pn,3,1,"td",14),t.BQk(),t.ynx(23,18),t.YNc(24,gn,2,0,"th",16),t.YNc(25,_n,3,1,"td",14),t.BQk(),t.ynx(26,19),t.YNc(27,mn,2,0,"th",16),t.YNc(28,hn,3,1,"td",14),t.BQk(),t.ynx(29,20),t.YNc(30,fn,2,0,"th",16),t.YNc(31,Cn,3,1,"td",14),t.BQk(),t.ynx(32,21),t.YNc(33,Mn,2,0,"th",16),t.YNc(34,bn,3,2,"td",14),t.BQk(),t.YNc(35,xn,1,0,"tr",22),t.YNc(36,Zn,1,0,"tr",23),t.qZA(),t._UZ(37,"mat-paginator",24,25),t.qZA()()()),2&e&&(t.xp6(13),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",null==o.dataSource||null==o.dataSource.data?null:o.dataSource.data.length)("pageIndex",0)("pageSize",5)("pageSizeOptions",t.DdM(7,vn)))},dependencies:[_.O5,M.Hw,J.gM,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.YE,g.nU,C.NW],styles:[".user_container_wrapper[_ngcontent-%COMP%]{padding:20px}.user_container[_ngcontent-%COMP%]{width:80%;margin:0 auto}.user_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.user_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.user_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .search_box[_ngcontent-%COMP%]   .search_field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.user_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);padding:8px 16px;border:none;color:#fff;font-weight:600;border-radius:4px;transition:background-color .3s ease}.user_container[_ngcontent-%COMP%]   .search_and_add[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #ccc;border-radius:8px;box-shadow:0 4px 8px #0000001a}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;overflow-x:scroll;border-radius:8px}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{border-radius:8px 8px 0 0}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--qgen-logo-blue);font-size:16px;font-weight:500;color:#fff}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 8px 0 0}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]{border-radius:0 0 8px 8px;width:100%!important;margin-top:20px;display:flex;justify-content:flex-end;align-items:center}.user_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{font-size:14px}.set_edit_color_button[_ngcontent-%COMP%]{color:var(--qgen-logo-yellow);cursor:pointer}.set_edit_color_button[_ngcontent-%COMP%]:hover{color:#ffd43b}"]})),i})();var wn=u(7921),kn=u(7398),Q=u(4630),yn=u(3680);function An(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Add Subscription"),t.qZA())}function Sn(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Update Subscription"),t.qZA())}function Nn(n,i){if(1&n&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("value",c),t.xp6(1),t.hij(" ",c," ")}}let Un=(()=>{var n;class i{constructor(e,o,r){(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"instituteService",void 0),(0,a.Z)(this,"items",[]),(0,a.Z)(this,"myControl",new s.NI("")),(0,a.Z)(this,"options",["One","Two","Three"]),(0,a.Z)(this,"instituteNameData",[]),(0,a.Z)(this,"instituteData",void 0),(0,a.Z)(this,"filteredOptions",void 0),this.data=e,this.dialogRef=o,this.instituteService=r,console.log(e),this.items=e}ngOnInit(){this.getAllInstituteData(),this.filteredOptions=this.myControl.valueChanges.pipe((0,wn.O)(""),(0,kn.U)(e=>this._filter(e||"")))}_filter(e){const o=e.toLowerCase();return this.instituteNameData.filter(r=>r.toLowerCase().includes(o))}closeDialog(){this.dialogRef.close()}getAllInstituteData(){this.instituteService.getAllInstitute().subscribe(e=>{console.log(e),console.log(e.result),this.instituteData=e.result,this.instituteNameData=e.result.map(o=>o.name),console.log(this.instituteNameData)},e=>{console.error("Not data get",e)})}optionSelected(e){const o=e.option.viewValue,r=this.instituteData.find(l=>l.name===o);if(r){const l=r._id;console.log("Selected:",o),console.log("ID:",l)}else console.log("Selected option not found in the data.")}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(p.WI),t.Y36(p.so),t.Y36(y))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-subscription-popup"]],decls:33,vars:7,consts:[[1,"subscription-popup-container"],[1,"heading"],[1,"head"],[4,"ngIf"],[1,"icon"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"forms"],["for","role"],["type","text","placeholder","Institute name","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["name","package","id","package"],["value","","disabled","","selected","","hidden",""],["value","monthly"],["value","3 monthly"],["value","6 monthly"],["value","yearly"],["type","submit"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,An,2,0,"h2",3),t.YNc(4,Sn,2,0,"h2",3),t.qZA(),t.TgZ(5,"div",4)(6,"mat-icon",5),t.NdJ("click",function(){return o.closeDialog()}),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",6)(9,"form")(10,"label",7),t._uU(11,"Institute Name"),t.qZA(),t._UZ(12,"br")(13,"input",8),t.TgZ(14,"mat-autocomplete",9,10),t.NdJ("optionSelected",function(l){return o.optionSelected(l)}),t.YNc(16,Nn,2,2,"mat-option",11),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"label",7),t._uU(19,"Package type"),t.qZA(),t.TgZ(20,"select",12)(21,"option",13),t._uU(22,"Package Type"),t.qZA(),t.TgZ(23,"option",14),t._uU(24,"Monthly"),t.qZA(),t.TgZ(25,"option",15),t._uU(26,"3 Months"),t.qZA(),t.TgZ(27,"option",16),t._uU(28,"6 Months"),t.qZA(),t.TgZ(29,"option",17),t._uU(30,"Yearly"),t.qZA()(),t.TgZ(31,"button",18),t._uU(32," Submit "),t.qZA()()()()),2&e){const r=t.MAs(15);t.xp6(3),t.Q6J("ngIf",null===o.items),t.xp6(1),t.Q6J("ngIf",null!==o.items),t.xp6(9),t.Q6J("formControl",o.myControl)("matAutocomplete",r),t.xp6(3),t.Q6J("ngForOf",t.lcZ(17,5,o.filteredOptions))}},dependencies:[_.sg,_.O5,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.F,s.oH,U.Nt,Q.XC,yn.ey,Q.ZL,M.Hw,_.Ov],styles:[".subscription-popup-container[_ngcontent-%COMP%]{width:500px;height:auto;padding:40px}.subscription-popup-container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{width:100%;height:7vh;display:flex;justify-content:space-between}.subscription-popup-container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:95%}.subscription-popup-container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:#4b5056;font-weight:700}.subscription-popup-container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]{width:100%;height:auto;padding:20px;border:1px solid #ccc;border-radius:4px;margin-top:10px}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-top:5px;border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin-top:5px;border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:25px;width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.subscription-popup-container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}"]})),i})();class In{constructor(){(0,a.Z)(this,"_id",void 0),(0,a.Z)(this,"institutionId",void 0),(0,a.Z)(this,"packageId",void 0),(0,a.Z)(this,"startDate",void 0),(0,a.Z)(this,"endDate",void 0),(0,a.Z)(this,"questionsCountResetDate",void 0),(0,a.Z)(this,"createdBy",void 0),(0,a.Z)(this,"modifiedBy",void 0)}}var qn=u(5400);function Dn(n,i){if(1&n&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.Q6J("value",c._id),t.xp6(1),t.AsE(" ",c.packageName," - $",c.amount," ")}}function Fn(n,i){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const c=t.oxw();t.xp6(1),t.AsE(" ",c.selectedPackageOption.questionsCount," Questions per ",c.selectedPackageOption.durationType," ")}}function Yn(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const c=t.oxw();t.xp6(1),t.hij("\xa0",t.xi3(2,1,c.subscriptionObject.endDate,"MM/dd/yyy"),"")}}function Jn(n,i){1&n&&(t.TgZ(0,"div",21),t._uU(1," Enter Valid information. "),t.qZA())}let Rn=(()=>{var n;class i{constructor(e,o,r,l,m,P,h){(0,a.Z)(this,"data",void 0),(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"logicalService",void 0),(0,a.Z)(this,"packageService",void 0),(0,a.Z)(this,"subscriptionService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"rsaService",void 0),(0,a.Z)(this,"updateSubscriptionForm",void 0),(0,a.Z)(this,"subscriptionObject",void 0),(0,a.Z)(this,"secretKey",f.N.secretKey),(0,a.Z)(this,"packageList",void 0),(0,a.Z)(this,"unqiuePackage",[]),(0,a.Z)(this,"Packageid",[]),(0,a.Z)(this,"isPackageSelected",!0),(0,a.Z)(this,"selectedDurationType",void 0),(0,a.Z)(this,"calculatedEndDate",void 0),(0,a.Z)(this,"selectedPackageOption",void 0),(0,a.Z)(this,"maxDate",new Date),(0,a.Z)(this,"minDate",this.calculateMinDate()),this.data=e,this.dialogRef=o,this.logicalService=r,this.packageService=l,this.subscriptionService=m,this.toastr=P,this.rsaService=h,console.log(this.data)}ngOnInit(){this.subscriptionObject=new In,this.getPackageData(),this.initForm(),this.subscriptionObject._id=this.data._id,this.subscriptionObject.institutionId=this.data.institutionId,this.subscriptionObject.packageId=this.data?.packageId?._id,this.subscriptionObject.startDate=new Date(this.data?.startDate),this.subscriptionObject.createdBy=this.data?.createdBy,this.subscriptionObject.questionsCountResetDate=this.data?.questionsCountResetDate,this.selectedPackageOption=this.data?.packageId,null!==this.data?.endDate?this.subscriptionObject.endDate=new Date(this.data?.endDate):this.calculateEndDate()}initForm(){this.updateSubscriptionForm=new s.cw({packageId:new s.NI,startDate:new s.NI("",[s.kI.required]),endDate:new s.NI})}calculateMinDate(){const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}onSubscriptionUpdate(){const e=localStorage.getItem("3");this.subscriptionObject.modifiedBy=this.rsaService.decryptText(e,this.secretKey),console.log(this.subscriptionObject),this.subscriptionService.updateSubscription(this.subscriptionObject).subscribe(o=>{this.toastr.success(o.message,"",{timeOut:3e3}),this.closeDialog()},o=>{this.toastr.error(o.error.message,"",{timeOut:3e3})})}closeDialog(){this.dialogRef.close()}getPackageData(){this.packageService.getAllPackages().subscribe(e=>{this.packageList=e.result.filter(o=>"B2B"===o.type),this.unqiuePackage=this.logicalService.filteredArrayWithJsonValue(this.packageList,"packageName")})}selectedPackage(e){this.subscriptionObject.startDate=new Date;const o=e.target.value;if("package"!==o){const r=this.packageList.find(l=>l._id===o);r?(this.selectedPackageOption=r,this.subscriptionObject.packageId=this.selectedPackageOption._id,this.calculateEndDate()):console.log("No package selected")}}calculateEndDate(){const e=this.subscriptionObject.startDate;if(""===e||void 0===e)return;let o;switch(this.selectedDurationType=this.data?.packageId?.durationType,this.selectedDurationType){case"monthly":o=new Date(e),o.setDate(e.getDate()+29);break;case"quarterly":o=new Date(e),o.setDate(e.getDate()+89);break;case"half-yearly":o=new Date(e),o.setDate(e.getDate()+179);break;case"annually":o=new Date(e),o.setDate(e.getDate()+364);break;default:o=null}this.subscriptionObject.endDate=o}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(p.WI),t.Y36(p.so),t.Y36(q),t.Y36(k.M),t.Y36(A),t.Y36(O._W),t.Y36(qn.Y))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-update-subscription"]],decls:31,vars:11,consts:[[1,"update-subscription-container"],[1,"main"],[1,"heading"],[1,"icon"],["mat-icon-button","",1,"close_btn",3,"click"],[1,"head"],[1,"forms"],[3,"formGroup"],["id","packages","formControlName","packageId",3,"ngModel","ngModelChange","change"],["value","package","disabled",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"dates"],["for","startdate"],["id","date"],["matInput","","formControlName","startDate","name","startdate","required","",3,"matDatepicker","ngModel","min","ngModelChange","dateChange"],["matSuffix","",3,"for"],["picker",""],["class","error-message",4,"ngIf"],["type","submit",3,"disabled","click"],[3,"value"],[1,"error-message"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.NdJ("click",function(){return o.closeDialog()}),t._uU(5,"close"),t.qZA()(),t.TgZ(6,"div",5)(7,"h2"),t._uU(8,"Update Subscription"),t.qZA()()(),t.TgZ(9,"div",6)(10,"form",7)(11,"select",8),t.NdJ("ngModelChange",function(l){return o.subscriptionObject.packageId=l})("change",function(l){return o.selectedPackage(l)}),t.TgZ(12,"option",9),t._uU(13,"Select package"),t.qZA(),t.YNc(14,Dn,2,3,"option",10),t.qZA(),t.YNc(15,Fn,2,2,"p",11),t.TgZ(16,"div",12)(17,"label",13),t._uU(18,"Start date"),t.qZA(),t.TgZ(19,"p",14)(20,"input",15),t.NdJ("ngModelChange",function(l){return o.subscriptionObject.startDate=l})("dateChange",function(){return o.calculateEndDate()}),t.qZA(),t._UZ(21,"mat-datepicker-toggle",16)(22,"mat-datepicker",null,17),t.qZA(),t.TgZ(24,"p")(25,"b"),t._uU(26,"End Date :"),t.qZA(),t.YNc(27,Yn,3,4,"span",11),t.qZA(),t.YNc(28,Jn,2,0,"div",18),t.TgZ(29,"button",19),t.NdJ("click",function(){return o.onSubscriptionUpdate()}),t._uU(30," Update "),t.qZA()()()()()()),2&e){const r=t.MAs(23);t.xp6(10),t.Q6J("formGroup",o.updateSubscriptionForm),t.xp6(1),t.Q6J("ngModel",o.subscriptionObject.packageId),t.xp6(3),t.Q6J("ngForOf",o.packageList),t.xp6(1),t.Q6J("ngIf",o.selectedPackageOption),t.xp6(5),t.Q6J("matDatepicker",r)("ngModel",o.subscriptionObject.startDate)("min",o.minDate),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Q6J("ngIf",null!==o.subscriptionObject.endDate&&""!==o.subscriptionObject.endDate),t.xp6(1),t.Q6J("ngIf",o.updateSubscriptionForm.controls.startDate.hasError("required")||"INVALID"===o.updateSubscriptionForm.status),t.xp6(1),t.Q6J("disabled",o.updateSubscriptionForm.invalid)}},dependencies:[_.sg,_.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.sg,s.u,U.Nt,T.R9,w.Mq,w.hl,w.nW,M.Hw,_.uU],styles:[".update-subscription-container[_ngcontent-%COMP%]{width:100%;border-radius:8px;padding:40px}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:auto;height:auto;padding:20px}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{width:100%;height:auto}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:right}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:#4b5056;font-weight:700}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]{min-width:100%;height:auto;display:flex;justify-content:center;padding:20px;border:1px solid #ccc}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background-color:#ccc}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-width:100%;height:auto}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row_group.highlight[_ngcontent-%COMP%]{background-color:#f4f6f8;padding:20px}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .row_group[_ngcontent-%COMP%]   .form-group.custom_group[_ngcontent-%COMP%]   label.highlight[_ngcontent-%COMP%]{background-color:transparent;padding:0 4px;margin-left:-4px;font-weight:700}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4b5056;font-weight:700;margin-top:10px}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-top:5px;border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #date[_ngcontent-%COMP%]{display:flex}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:14px}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:25px;width:100%;text-align:center;padding:8px 16px;border:none;color:#fff;font-weight:600;background-color:var(--qgen-logo-blue);border-radius:4px;transition:background-color .3s ease}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#57c4ff}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:6px 8px}@media (max-width: 768px){.update-subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{padding:0}}@media (max-width: 768px){.add-subscription-container[_ngcontent-%COMP%]{padding:20px;height:auto}}"]})),i})();function Qn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," INSTITUTION NAME "),t.qZA())}function En(n,i){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.hij(" ",c.institutionId.name," ")}}function Bn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1,"PACKAGE"),t.qZA())}function jn(n,i){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.AsE(" ",c.packageId.packageName,"/$ ",c.packageId.amount," ")}}function zn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," START DATE "),t.qZA())}function Ln(n,i){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,c.startDate,"MM-dd-YYYY")," ")}}function Hn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," END DATE "),t.qZA())}function $n(n,i){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,c.endDate,"MM-dd-YYYY")," ")}}function Gn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," QUESTION RESET DATE "),t.qZA())}function Kn(n,i){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const c=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,c.questionsCountResetDate,"MM-dd-YYYY")," ")}}function Vn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1,"Action"),t.qZA())}function Wn(n,i){if(1&n){const c=t.EpF();t.TgZ(0,"td",21)(1,"mat-icon",22),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.updateSubscription(r))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",22),t.NdJ("click",function(){const r=t.CHM(c).$implicit,l=t.oxw();return t.KtG(l.deleteSubscription(r))}),t._uU(4,"delete"),t.qZA()()}}function Xn(n,i){1&n&&t._UZ(0,"tr",23)}function to(n,i){if(1&n&&t._UZ(0,"tr",24),2&n){const c=i.even;t.ekj("odd-row",!c)("even-row",c)}}const eo=function(){return[5,10,20]},no=[{path:"",redirectTo:"package",pathMatch:"full"},{path:"package",component:kt},{path:"institution",component:re},{path:"topic",component:Oe},{path:"role",component:Ue},{path:"user",component:Tn},{path:"subscriber",component:(()=>{var n;class i{constructor(e,o,r){(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"subscriptionService",void 0),(0,a.Z)(this,"toastr",void 0),(0,a.Z)(this,"displayedColumns",["instituteName","instituteId","packageType","packageTypeId","questionsCountResetDate","action"]),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"subscriptionList",void 0),(0,a.Z)(this,"sort",void 0),(0,a.Z)(this,"paginator",void 0),this.dialog=e,this.subscriptionService=o,this.toastr=r}ngOnInit(){this.getAllData()}getAllData(){this.subscriptionService.getAllSubscriptions().subscribe(e=>{this.subscriptionList=e.result,this.dataSource=new d.by(this.subscriptionList),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator})}addData(){this.dialog.open(Un,{width:"500px",height:"auto",data:null}).afterClosed().subscribe(o=>{console.log(`Dialog result: ${o}`)})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.dataSource.sort?.sort({id:"",start:"asc",disableClear:!1})}updateSubscription(e){this.dialog.open(Rn,{width:"600px",margin:"0 auto",data:e}).afterClosed().subscribe(l=>{console.log(`Dialog result: ${l}`),this.getAllData()})}deleteSubscription(e){x().fire({title:"Delete",text:"Are you sure you want to Delete?",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&this.subscriptionService.deleteSubscription(e).subscribe(r=>{this.toastr.success(r.message,"",{timeOut:3e3}),this.getAllData()},r=>{this.toastr.error(r.error.message,"",{timeOut:3e3})})})}}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(p.uw),t.Y36(A),t.Y36(O._W))}),(0,a.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-subscription"]],viewQuery:function(e,o){if(1&e&&(t.Gf(g.YE,5),t.Gf(C.NW,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.sort=r.first),t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:30,vars:5,consts:[[1,"subscription-container"],[1,"main"],[1,"data-area"],[1,"data"],[1,"control"],[1,"button"],["placeholder","Search here",3,"keyup"],[1,"table"],["mat-table","","matSort","","matPaginator","",3,"dataSource"],["matColumnDef","instituteName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","instituteId"],["matColumnDef","packageType"],["matColumnDef","packageTypeId"],["matColumnDef","questionsCountResetDate"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"odd-row","even-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()(),t.TgZ(7,"div",7)(8,"table",8),t.ynx(9,9),t.YNc(10,Qn,2,0,"th",10),t.YNc(11,En,2,1,"td",11),t.BQk(),t.ynx(12,12),t.YNc(13,Bn,2,0,"th",10),t.YNc(14,jn,2,2,"td",11),t.BQk(),t.ynx(15,13),t.YNc(16,zn,2,0,"th",10),t.YNc(17,Ln,3,4,"td",11),t.BQk(),t.ynx(18,14),t.YNc(19,Hn,2,0,"th",10),t.YNc(20,$n,3,4,"td",11),t.BQk(),t.ynx(21,15),t.YNc(22,Gn,2,0,"th",10),t.YNc(23,Kn,3,4,"td",11),t.BQk(),t.ynx(24,16),t.YNc(25,Vn,2,0,"th",10),t.YNc(26,Wn,5,0,"td",11),t.BQk(),t.YNc(27,Xn,1,0,"tr",17),t.YNc(28,to,1,4,"tr",18),t.qZA(),t._UZ(29,"mat-paginator",19),t.qZA()()()()()),2&e&&(t.xp6(8),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(4,eo)))},dependencies:[M.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,g.YE,g.nU,C.NW,_.uU],styles:[".subscription-container[_ngcontent-%COMP%]{width:100%;height:85vh;display:flex;justify-content:center}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:80%;height:85vh}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:100%;height:auto}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:auto;height:auto}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#46b3eb;color:#fff}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #c6c9cd;border-radius:3px;color:#636972;box-shadow:inset 0 1px 2px #0000001a;font-family:open_sans,Open Sans,sans-serif;line-height:1.5;font-weight:400;font-size:14px;font-style:normal;padding:6px 8px;min-height:36px}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-weight:600;color:#bcbcbc}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   #remove[_ngcontent-%COMP%]{margin-left:20px}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;height:auto;margin-top:20px}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:32%;border:1px solid #46b3eb;padding:5px;border-radius:2px}@media (max-width: 768px){.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:auto;height:auto;margin-top:15px;box-shadow:0 0 10px #00000080}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#46b3eb;color:#fff}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fabf01}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .odd-row[_ngcontent-%COMP%]{background-color:#f5f5f5}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .even-row[_ngcontent-%COMP%]{background-color:#fff}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{z-index:1;background-color:#fff;border:none;box-shadow:0 0 10px #00000080}@media screen and (max-width: 425px){.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{width:100%}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:auto}.subscription-container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]})),i})()}];let oo=(()=>{var n;class i{}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)}),(0,a.Z)(i,"\u0275mod",t.oAB({type:n})),(0,a.Z)(i,"\u0275inj",t.cJS({imports:[Z.Bz.forChild(no),Z.Bz]})),i})();var io=u(5986),ao=u(7466),ro=u(8525),co=u(2202),so=u(7988),lo=u(2651),uo=u(1274),po=u(9038),go=u(3176),_o=u(5195),mo=u(8257),ho=u(4104),fo=u(3305),Co=u(9488),Mo=u(2557),Oo=u(5940),Po=u(6007),bo=u(2939);let xo=(()=>{var n;class i{}return n=i,(0,a.Z)(i,"\u0275fac",function(e){return new(e||n)}),(0,a.Z)(i,"\u0275mod",t.oAB({type:n})),(0,a.Z)(i,"\u0275inj",t.cJS({imports:[_.ez,oo,s.u5,s.UX,io.p9,S.ot,U.c,Q.Bb,w.FA,T.lN,ao.Fk,ro.LD,co.KP,D.rP,so.Tx,lo.SJ,uo.g0,po.ie,go.N6,_o.QW,mo.T5,ho.Nh,fo.To,Co.vV,Mo.Hi,M.Ps,Oo.Cq,Po.Cv,p.Is,J.AV,bo.ZX,d.p0,g.JX,C.TU]})),i})()},8773:(K,N,u)=>{u.d(N,{M:()=>C});var a=u(1180),_=u(9862),Z=u(553),d=u(5879);let C=(()=>{var g;class s{constructor(b){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"headers",(new _.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("1")}`)),(0,a.Z)(this,"getAllPackagesUrl",Z.N.localdomain+"package/getAll"),(0,a.Z)(this,"createPackageUrl",Z.N.localdomain+"package/save"),(0,a.Z)(this,"updatePackageUrl",Z.N.localdomain+"package/update"),(0,a.Z)(this,"deletePackageUrl",Z.N.localdomain+"package/delete"),(0,a.Z)(this,"createPackage",t=>this.http.post(this.createPackageUrl,t)),this.http=b}getAllPackages(){return this.http.get(`${this.getAllPackagesUrl}`)}updatePackage(b){return this.http.put(`${this.updatePackageUrl}`,b)}getB2CPackages(){return this.http.get(`${this.getAllPackagesUrl}?type=B2C`)}deletePackage(b){return this.http.delete(this.deletePackageUrl,{body:b})}}return g=s,(0,a.Z)(s,"\u0275fac",function(b){return new(b||g)(d.LFG(_.eN))}),(0,a.Z)(s,"\u0275prov",d.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})),s})()}}]);